# æ˜¼å¤œå…‰å½±ç³»ç»Ÿ â€” å®Œæ•´é…ç½®æŒ‡å—

## ç›®å½•

1. [é¦–æ¬¡å®‰è£…ï¼ˆ3 æ­¥å®Œæˆï¼‰](#1-é¦–æ¬¡å®‰è£…)
2. [ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ](#2-ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ)
3. [DayNightConfig é…ç½®è¯¦è§£](#3-daynightconfig-é…ç½®è¯¦è§£)
4. [å­£èŠ‚é¢œè‰²æ›²çº¿è°ƒæ ¡](#4-å­£èŠ‚é¢œè‰²æ›²çº¿è°ƒæ ¡)
5. [å¤©æ°”ä¿®æ­£è‰²è°ƒæ ¡](#5-å¤©æ°”ä¿®æ­£è‰²è°ƒæ ¡)
6. [è¿‡æ¸¡å‚æ•°è°ƒæ ¡](#6-è¿‡æ¸¡å‚æ•°è°ƒæ ¡)
7. [è·¯çº¿ Aï¼ˆURP å¢å¼ºå±‚ï¼‰é…ç½®](#7-è·¯çº¿-a-é…ç½®)
8. [å¤œé—´å…‰æºé…ç½®](#8-å¤œé—´å…‰æºé…ç½®)
9. [è·¯çº¿èåˆå‚æ•°](#9-è·¯çº¿èåˆå‚æ•°)
10. [è°ƒè¯•ä¸é¢„è§ˆ](#10-è°ƒè¯•ä¸é¢„è§ˆ)
11. [å¸¸è§é—®é¢˜æ’æŸ¥](#11-å¸¸è§é—®é¢˜æ’æŸ¥)
12. [å‚æ•°é€ŸæŸ¥è¡¨](#12-å‚æ•°é€ŸæŸ¥è¡¨)

---

## 1. é¦–æ¬¡å®‰è£…

åœ¨ Unity ç¼–è¾‘å™¨ä¸­æŒ‰é¡ºåºæ‰§è¡Œä»¥ä¸‹ 3 ä¸ªèœå•é¡¹ï¼š

### æ­¥éª¤ 1ï¼šåˆ›å»ºé…ç½®èµ„äº§

èœå•è·¯å¾„ï¼š`Tools > Create DayNight Config`

- ç”Ÿæˆä½ç½®ï¼š`Assets/111_Data/DayNightConfig.asset`
- åŒ…å«å››å­£é»˜è®¤ Gradientã€å¤©æ°”ä¿®æ­£è‰²ã€è¿‡æ¸¡å‚æ•°ã€è·¯çº¿ A å…‰ç…§æ›²çº¿
- å¦‚æœå·²å­˜åœ¨ä¼šå¼¹å‡ºè¦†ç›–ç¡®è®¤å¯¹è¯æ¡†

### æ­¥éª¤ 2ï¼šåˆ›å»º Multiply æè´¨

èœå•è·¯å¾„ï¼š`Tools > Create DayNight Multiply Material`

- ç”Ÿæˆä½ç½®ï¼š`Assets/444_Shaders/Material/DayNightMultiply.mat`
- Shaderï¼š`Sprites/Default`
- æ··åˆæ¨¡å¼ï¼š`SrcBlend=DstColor, DstBlend=Zero`ï¼ˆMultiply æ•ˆæœï¼‰
- ç™½è‰² = æ— å˜åŒ–ï¼Œè¶Šæš— = æ•ˆæœè¶Šå¼º

### æ­¥éª¤ 3ï¼šæ­å»ºåœºæ™¯å±‚çº§

èœå•è·¯å¾„ï¼š`Tools > Setup DayNight Scene`

è‡ªåŠ¨åˆ›å»ºä»¥ä¸‹å±‚çº§ç»“æ„ï¼š

```
PersistentManagers/
  â””â”€â”€ DayNightManager          â† DayNightManager ç»„ä»¶
        â”œâ”€â”€ DayNightOverlay    â† DayNightOverlay + SpriteRendererï¼ˆè·¯çº¿ Bï¼‰
        â”œâ”€â”€ GlobalLightController  â† è·¯çº¿ Aï¼Œé»˜è®¤ç¦ç”¨
        â””â”€â”€ PointLightManager      â† è·¯çº¿ Aï¼Œé»˜è®¤ç¦ç”¨
```

è‡ªåŠ¨å®Œæˆçš„æ“ä½œï¼š
- åˆ›å»ºæ‰€æœ‰å­å¯¹è±¡å¹¶æ·»åŠ å¯¹åº”ç»„ä»¶
- é€šè¿‡ SerializedObject è¿æ¥ DayNightManager çš„æ‰€æœ‰ç§æœ‰å¼•ç”¨ï¼ˆconfigã€overlayã€globalLightã€pointLightMgrï¼‰
- åˆ†é… DayNightConfig èµ„äº§å’Œ Multiply æè´¨
- è·¯çº¿ A å­å¯¹è±¡é»˜è®¤ `SetActive(false)`
- æ ‡è®°åœºæ™¯ä¸ºè„ï¼ˆéœ€è¦æ‰‹åŠ¨ Ctrl+S ä¿å­˜åœºæ™¯ï¼‰

å¦‚æœåœºæ™¯ä¸­å·²å­˜åœ¨ DayNightManagerï¼Œä¼šå¼¹å‡º"é‡æ–°é…ç½®"ç¡®è®¤æ¡†ï¼Œé€‰æ‹©ååªæ›´æ–°å¼•ç”¨ä¸é‡å¤åˆ›å»ºã€‚

### å®‰è£…éªŒè¯

å®‰è£…å®Œæˆåï¼Œè¿›å…¥ Play æ¨¡å¼ï¼Œæ£€æŸ¥ Console æ˜¯å¦è¾“å‡ºï¼š
```
[DayNightManager] åˆå§‹åŒ–å®Œæˆ
```

å¦‚æœçœ‹åˆ°è­¦å‘Š `config å¼•ç”¨ä¸ºç©º`ï¼Œè¯´æ˜æ­¥éª¤ 1 æˆ–æ­¥éª¤ 3 çš„å¼•ç”¨è¿æ¥æœ‰é—®é¢˜ï¼Œé‡æ–°æ‰§è¡Œæ­¥éª¤ 3 å³å¯ã€‚

---

## 2. ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ

### äº‹ä»¶é©±åŠ¨æµç¨‹

```
TimeManager.OnMinuteChanged â†’ DayNightManager.OnMinuteChanged
  â†’ GetDayProgress() è·å– 0-1 æ—¶é—´è¿›åº¦
  â†’ CalculateOverlayColor() ä»å­£èŠ‚ Gradient å–è‰²
  â†’ ApplyWeatherModifier() å åŠ å¤©æ°”ä¿®æ­£
  â†’ UpdateOverlay() åº”ç”¨åˆ° DayNightOverlay
  â†’ UpdateGlobalLight() æ›´æ–°è·¯çº¿ A å…¨å±€å…‰ï¼ˆå¦‚å¯ç”¨ï¼‰
  â†’ UpdatePointLights() æ›´æ–°è·¯çº¿ A å¤œé—´å…‰æºï¼ˆå¦‚å¯ç”¨ï¼‰
```

### æ—¶é—´æ˜ å°„ï¼ˆdayProgressï¼‰

TimeManager çš„ `GetDayProgress()` è¿”å› 0-1 æµ®ç‚¹æ•°ï¼š

| dayProgress | æ¸¸æˆæ—¶é—´ | å«ä¹‰ |
|-------------|----------|------|
| 0.00 | 06:00 | æ—¥å‡º |
| 0.15 | 09:00 | ä¸Šåˆ |
| 0.30 | 12:00 | æ­£åˆ |
| 0.45 | 15:00 | ä¸‹åˆ |
| 0.60 | 18:00 | æ—¥è½ |
| 0.80 | 22:00 | æ·±å¤œ |
| 1.00 | 02:00 | å‡Œæ™¨ï¼ˆå¼ºåˆ¶ç¡è§‰ï¼‰ |

Gradient çš„å…³é”®å¸§ä½ç½®ç›´æ¥å¯¹åº” dayProgress å€¼ã€‚è°ƒæ•´ Gradient æ—¶ï¼Œè¯·å‚ç…§æ­¤è¡¨ç¡®å®šå…³é”®å¸§ä½ç½®ã€‚

### Sorting Layer ä½ç½®

```
Background â†’ Ground â†’ Layer 1 â†’ Layer 2 â†’ Layer 3 â†’ Effects â†’ CloudShadow â†’ UI
                                                                    â†‘
                                                          DayNightOverlay (Order=100)
                                                          CloudShadowManager (Order=0)
```

DayNightOverlay åœ¨ CloudShadow å±‚ Order=100ï¼Œé«˜äº CloudShadowManager çš„ Order=0ï¼Œä½äº UI å±‚ã€‚ä¸¤è€…è§†è§‰æ•ˆæœå åŠ ï¼Œäº’ä¸å†²çªã€‚

---

## 3. DayNightConfig é…ç½®è¯¦è§£

é€‰ä¸­ `Assets/111_Data/DayNightConfig.asset`ï¼Œåœ¨ Inspector ä¸­å¯ä»¥çœ‹åˆ°ä»¥ä¸‹åˆ†ç»„ï¼š

### Inspector å­—æ®µæ€»è§ˆ

| åˆ†ç»„ | å­—æ®µ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|------|--------|------|
| å­£èŠ‚é¢œè‰²æ›²çº¿ | springGradient | Gradient | é¢„è®¾ | æ˜¥å­£ 24h è‰²è°ƒ |
| | summerGradient | Gradient | é¢„è®¾ | å¤å­£ 24h è‰²è°ƒ |
| | autumnGradient | Gradient | é¢„è®¾ | ç§‹å­£ 24h è‰²è°ƒ |
| | winterGradient | Gradient | é¢„è®¾ | å†¬å­£ 24h è‰²è°ƒ |
| å¤©æ°”ä¿®æ­£è‰² | rainyTint | Color | (0.55, 0.55, 0.6) | é›¨å¤©åç°åæš— |
| | witheringTint | Color | (0.85, 0.75, 0.45) | æ¯èå¤©åé»„åå¹² |
| | weatherTintStrength | float | 0.5 | å¤©æ°”ä¿®æ­£å¼ºåº¦ 0-1 |
| è¿‡æ¸¡å‚æ•° | weatherTransitionDuration | float | 1.5s | å¤©æ°”è¿‡æ¸¡æ—¶é•¿ |
| | timeJumpTransitionDuration | float | 0.8s | ç¡è§‰è·³æ—¶é—´è¿‡æ¸¡æ—¶é•¿ |
| | seasonTransitionDuration | float | 2.0s | å­£èŠ‚è¿‡æ¸¡æ—¶é•¿ |
| å…¨å±€å…‰ç…§æ›²çº¿ | globalLightIntensityCurve | AnimationCurve | é¢„è®¾ | è·¯çº¿ A å…‰ç…§å¼ºåº¦ |
| | globalLightColorGradient | Gradient | é¢„è®¾ | è·¯çº¿ A å…‰ç…§é¢œè‰² |
| å±€éƒ¨å…‰æº | nightLightActivateHour | float | 18 | å¤œé—´å…‰æºæ¿€æ´»æ—¶é—´ |
| | nightLightDeactivateHour | float | 6 | å¤œé—´å…‰æºå…³é—­æ—¶é—´ |
| | pointLightFadeDuration | float | 1.0s | ç‚¹å…‰æºæ·¡å…¥æ·¡å‡ºæ—¶é•¿ |
| è·¯çº¿èåˆ | overlayStrengthWithURP | float | 0.4 | è·¯çº¿ A å¯ç”¨æ—¶ overlay å¼ºåº¦ |
| | overlayStrengthWithoutURP | float | 1.0 | ä»…è·¯çº¿ B æ—¶ overlay å¼ºåº¦ |

---

## 4. å­£èŠ‚é¢œè‰²æ›²çº¿è°ƒæ ¡

### Multiply æ··åˆæ¨¡å¼åŸç†

Overlay ä½¿ç”¨ Multiply æ··åˆæ¨¡å¼ï¼Œé¢œè‰²è®¡ç®—å…¬å¼ï¼š

```
æœ€ç»ˆåƒç´ è‰² = åŸå§‹åƒç´ è‰² Ã— Overlay é¢œè‰²
```

- ç™½è‰² (1,1,1) = æ— å˜åŒ–ï¼ˆæ­£åˆæ•ˆæœï¼‰
- è¶Šæš— = ç”»é¢è¶Šæš—ï¼ˆå¤œæ™šæ•ˆæœï¼‰
- åè‰² = ç”»é¢åå‘è¯¥è‰²è°ƒï¼ˆæ—¥å‡ºåé‡‘ã€æ—¥è½åæ©™ï¼‰

### é»˜è®¤å››å­£å…³é”®å¸§

æ¯ä¸ªå­£èŠ‚ Gradient æœ‰ 5 ä¸ªå…³é”®å¸§ï¼Œå¯¹åº” 5 ä¸ªæ—¶é—´èŠ‚ç‚¹ï¼š

#### æ˜¥å­£ (springGradient)

| ä½ç½® | æ—¶é—´ | RGB | è‰²è°ƒæè¿° |
|------|------|-----|----------|
| 0.00 | 06:00 | (0.95, 0.90, 0.75) | æ·¡ç»¿é‡‘ï¼Œæ¸…æ™¨è–„é›¾æ„Ÿ |
| 0.30 | 12:00 | (0.98, 0.98, 0.95) | è¿‘ç™½å¾®ç»¿ï¼Œæ­£åˆæœ€äº® |
| 0.60 | 18:00 | (0.90, 0.80, 0.60) | ç»¿æ©™ï¼Œæ˜¥æ—¥é»„æ˜ |
| 0.80 | 22:00 | (0.40, 0.45, 0.60) | æ·±è“ç»¿ï¼Œæ˜¥å¤œ |
| 1.00 | 02:00 | (0.30, 0.30, 0.50) | æ·±è“ï¼Œå‡Œæ™¨æœ€æš— |

#### å¤å­£ (summerGradient)

| ä½ç½® | æ—¶é—´ | RGB | è‰²è°ƒæè¿° |
|------|------|-----|----------|
| 0.00 | 06:00 | (0.95, 0.88, 0.70) | æš–é‡‘ï¼Œå¤æ—¥æ¸…æ™¨ |
| 0.30 | 12:00 | (1.00, 0.98, 0.95) | è¿‘ç™½å¾®æš–ï¼Œçƒˆæ—¥æ­£åˆ |
| 0.60 | 18:00 | (0.92, 0.75, 0.55) | æš–æ©™çº¢ï¼Œå¤æ—¥è½éœ |
| 0.80 | 22:00 | (0.38, 0.40, 0.58) | æ·±è“æš–ï¼Œå¤å¤œ |
| 1.00 | 02:00 | (0.32, 0.28, 0.48) | æ·±è“ç´«ï¼Œå¤å¤œå‡Œæ™¨ |

#### ç§‹å­£ (autumnGradient)

| ä½ç½® | æ—¶é—´ | RGB | è‰²è°ƒæè¿° |
|------|------|-----|----------|
| 0.00 | 06:00 | (0.95, 0.82, 0.60) | æ©™é‡‘ï¼Œç§‹æ—¥æ™¨å…‰ |
| 0.30 | 12:00 | (0.98, 0.95, 0.90) | è¿‘ç™½å¾®æ©™ï¼Œç§‹æ—¥æ­£åˆ |
| 0.60 | 18:00 | (0.88, 0.70, 0.45) | æ·±æ©™ï¼Œç§‹æ—¥æš®è‰² |
| 0.80 | 22:00 | (0.40, 0.38, 0.55) | æ·±è“æ©™ï¼Œç§‹å¤œ |
| 1.00 | 02:00 | (0.30, 0.30, 0.48) | æ·±è“ï¼Œç§‹å¤œå‡Œæ™¨ |

#### å†¬å­£ (winterGradient)

| ä½ç½® | æ—¶é—´ | RGB | è‰²è°ƒæè¿° |
|------|------|-----|----------|
| 0.00 | 06:00 | (0.80, 0.85, 0.95) | å†·è“ç™½ï¼Œå†¬æ—¥æ™¨æ›¦ |
| 0.30 | 12:00 | (0.95, 0.95, 0.98) | è¿‘ç™½å¾®è“ï¼Œå†¬æ—¥æ­£åˆ |
| 0.60 | 18:00 | (0.70, 0.65, 0.85) | å†·ç´«è“ï¼Œå†¬æ—¥æš®è‰² |
| 0.80 | 22:00 | (0.35, 0.30, 0.55) | æ·±è“ç´«ï¼Œå†¬å¤œ |
| 1.00 | 02:00 | (0.28, 0.25, 0.50) | æ·±ç´«è“ï¼Œå†¬å¤œå‡Œæ™¨ |

### è°ƒæ ¡æŠ€å·§

1. æ­£åˆå…³é”®å¸§ï¼ˆä½ç½® 0.30ï¼‰åº”å°½é‡æ¥è¿‘ç™½è‰²ï¼Œå¦åˆ™ç™½å¤©ç”»é¢ä¼šåè‰²
2. å¤œæ™šå…³é”®å¸§ï¼ˆä½ç½® 0.80-1.00ï¼‰ä¸è¦å¤ªæš—ï¼Œå»ºè®® RGB å„é€šé“ä¸ä½äº 0.25ï¼Œå¦åˆ™ç”»é¢å‡ ä¹å…¨é»‘
3. æ—¥å‡º/æ—¥è½å…³é”®å¸§ï¼ˆä½ç½® 0.00 å’Œ 0.60ï¼‰æ˜¯è‰²è°ƒç‰¹å¾æœ€æ˜æ˜¾çš„æ—¶æ®µï¼Œå¯ä»¥å¤§èƒ†åè‰²
4. Alpha é€šé“ä¿æŒ 1.0ï¼Œå¼ºåº¦æ§åˆ¶ç”± `overlayStrengthWithoutURP` å­—æ®µè´Ÿè´£
5. åœ¨ Play æ¨¡å¼ä¸‹ä¿®æ”¹ Gradient å¯ä»¥å®æ—¶é¢„è§ˆæ•ˆæœï¼Œä½†é€€å‡º Play æ¨¡å¼åä¿®æ”¹ä¼šä¸¢å¤±â€”â€”ç¡®è®¤æ»¡æ„ååœ¨é Play æ¨¡å¼ä¸‹é‡æ–°è®¾ç½®

### è‡ªå®šä¹‰å­£èŠ‚è‰²è°ƒ

å¦‚æœé»˜è®¤é¢„è®¾ä¸æ»¡æ„ï¼Œå¯ä»¥åœ¨ Inspector ä¸­ç›´æ¥ç‚¹å‡» Gradient æ¡æ‰“å¼€ç¼–è¾‘å™¨ï¼š
- ä¸Šæ–¹è‰²æ ‡æ§åˆ¶ Alphaï¼ˆä¿æŒ 1.0 å³å¯ï¼‰
- ä¸‹æ–¹è‰²æ ‡æ§åˆ¶ RGB é¢œè‰²
- åŒå‡»è‰²æ ‡å¯ç²¾ç¡®è¾“å…¥ RGB å€¼
- æ‹–åŠ¨è‰²æ ‡ä½ç½®å¯¹åº” dayProgressï¼ˆ0=06:00, 1=02:00ï¼‰
- å¯ä»¥æ·»åŠ æ›´å¤šå…³é”®å¸§å®ç°æ›´ç»†è…»çš„è¿‡æ¸¡ï¼ˆå¦‚å¢åŠ  09:00ã€15:00 èŠ‚ç‚¹ï¼‰

---

## 5. å¤©æ°”ä¿®æ­£è‰²è°ƒæ ¡

### å·¥ä½œåŸç†

å¤©æ°”ä¿®æ­£é€šè¿‡ `Color.Lerp` åœ¨åŸºç¡€è‰²è°ƒå’Œå¤©æ°”ä¿®æ­£è‰²ä¹‹é—´æ’å€¼ï¼š

```
æœ€ç»ˆè‰² = Lerp(åŸºç¡€è‰²è°ƒ, å¤©æ°”ä¿®æ­£è‰², weatherTintStrength)
```

- æ™´å¤©ï¼ˆSunnyï¼‰ï¼šä¿®æ­£è‰²ä¸ºç™½è‰² (1,1,1)ï¼ŒLerp æ— æ•ˆæœï¼Œç”»é¢ä¸å˜
- é›¨å¤©ï¼ˆRainyï¼‰ï¼šä¿®æ­£è‰²åç°åæš—ï¼Œç”»é¢æ•´ä½“å˜æš—å˜ç°
- æ¯èå¤©ï¼ˆWitheringï¼‰ï¼šä¿®æ­£è‰²åé»„ï¼Œç”»é¢åå‘å¹²ç‡¥æ¯é»„æ„Ÿ

### å‚æ•°è°ƒæ ¡

| å‚æ•° | é»˜è®¤å€¼ | è°ƒæ ¡å»ºè®® |
|------|--------|----------|
| rainyTint | (0.55, 0.55, 0.6) | R=G ä¿æŒæ¥è¿‘ï¼ˆç°è‰²åŸºè°ƒï¼‰ï¼ŒB ç•¥é«˜ï¼ˆå†·æ„Ÿï¼‰ã€‚é™ä½ RGB å€¼ = æ›´æš—çš„é›¨å¤© |
| witheringTint | (0.85, 0.75, 0.45) | R>G>Bï¼ˆæš–é»„åŸºè°ƒï¼‰ã€‚é™ä½ B å€¼ = æ›´å¼ºçš„æ¯é»„æ„Ÿ |
| weatherTintStrength | 0.5 | 0.3=è½»å¾®ä¿®æ­£ï¼Œ0.5=ä¸­ç­‰ï¼Œ0.7=å¼ºçƒˆã€‚å»ºè®®ä¸è¶…è¿‡ 0.7ï¼Œå¦åˆ™å¤©æ°”è‰²ä¼šå®Œå…¨è¦†ç›–æ˜¼å¤œè‰²è°ƒ |

### æ³¨æ„äº‹é¡¹

- å¤©æ°”ä¿®æ­£æ˜¯åœ¨æ˜¼å¤œè‰²è°ƒä¹‹ä¸Šå åŠ çš„ï¼Œæ‰€ä»¥å¤œæ™š+é›¨å¤©ä¼šæ¯”ç™½å¤©+é›¨å¤©æ›´æš—
- å¦‚æœè§‰å¾—é›¨å¤©å¤ªæš—ï¼Œä¼˜å…ˆé™ä½ `weatherTintStrength` è€Œä¸æ˜¯æäº® `rainyTint`
- å¤©æ°”å˜åŒ–æ—¶ä¼šè‡ªåŠ¨å¹³æ»‘è¿‡æ¸¡ï¼ˆæ—¶é•¿ç”± `weatherTransitionDuration` æ§åˆ¶ï¼‰

---

## 6. è¿‡æ¸¡å‚æ•°è°ƒæ ¡

ç³»ç»Ÿæœ‰ä¸‰ç§ç‹¬ç«‹çš„å¹³æ»‘è¿‡æ¸¡æœºåˆ¶ï¼Œå„è‡ªæœ‰ç‹¬ç«‹çš„è®¡æ—¶å™¨ï¼š

| è¿‡æ¸¡ç±»å‹ | å‚æ•° | é»˜è®¤å€¼ | è§¦å‘æ¡ä»¶ | è¯´æ˜ |
|----------|------|--------|----------|------|
| å¤©æ°”è¿‡æ¸¡ | weatherTransitionDuration | 1.5s | WeatherSystem.OnWeatherChanged | å¤©æ°”å˜åŒ–æ—¶è‰²è°ƒå¹³æ»‘åˆ‡æ¢ |
| æ—¶é—´è·³è·ƒ | timeJumpTransitionDuration | 0.8s | TimeManager.OnSleep | ç¡è§‰å¯¼è‡´æ—¶é—´è·³è·ƒæ—¶çš„å¹³æ»‘è¿‡æ¸¡ |
| å­£èŠ‚è¿‡æ¸¡ | seasonTransitionDuration | 2.0s | SeasonManager.OnSeasonChanged | å­£èŠ‚å˜åŒ–æ—¶ Gradient å¹³æ»‘åˆ‡æ¢ |

å¦å¤–è¿˜æœ‰ä¸€ç§è·¯çº¿åˆ‡æ¢è¿‡æ¸¡ï¼Œç¡¬ç¼–ç ä¸º 1.0 ç§’ï¼ˆ`ROUTE_TRANSITION_DURATION` å¸¸é‡ï¼‰ï¼Œåœ¨è·¯çº¿ A å¼€å…³åˆ‡æ¢æ—¶è§¦å‘ overlay å¼ºåº¦çš„å¹³æ»‘æ’å€¼ã€‚

### è°ƒæ ¡å»ºè®®

- å¤©æ°”è¿‡æ¸¡ 1.5s æ˜¯æ¯”è¾ƒè‡ªç„¶çš„èŠ‚å¥ï¼ŒåŠ å¿«åˆ° 0.5s ä¼šæœ‰"çªç„¶å˜å¤©"çš„æ„Ÿè§‰ï¼Œé€‚åˆæš´é£é›¨
- æ—¶é—´è·³è·ƒ 0.8s è¶³å¤ŸçŸ­ä¸ä¼šè®©ç©å®¶ç­‰å¾…ï¼Œä½†åˆä¸æ˜¯ç¬å˜ã€‚å¦‚æœè§‰å¾—å¤ªå¿«å¯ä»¥æåˆ° 1.2s
- å­£èŠ‚è¿‡æ¸¡ 2.0s æ¯”è¾ƒä»å®¹ï¼Œå› ä¸ºå­£èŠ‚å˜åŒ–æ˜¯é‡å¤§äº‹ä»¶ï¼Œå€¼å¾—ç¨é•¿çš„è¿‡æ¸¡

---

## 7. è·¯çº¿ Aï¼ˆURP å¢å¼ºå±‚ï¼‰é…ç½®

### å‰ç½®æ¡ä»¶

è·¯çº¿ A ä¾èµ– URP 2D æ¸²æŸ“ç®¡çº¿ã€‚å¯ç”¨å‰éœ€è¦ï¼š

1. å®‰è£… URP åŒ…ï¼š`com.unity.render-pipelines.universal`
2. åˆ›å»º 2D Renderer Asset å¹¶é…ç½®ä¸ºé»˜è®¤æ¸²æŸ“å™¨
3. åœ¨ Project Settings > Player > Scripting Define Symbols ä¸­æ·»åŠ  `USE_URP`
4. å°†æ‰€æœ‰ç°æœ‰æè´¨å‡çº§ä¸º URP å…¼å®¹æè´¨

å¦‚æœä¸æ·»åŠ  `USE_URP` å®šä¹‰ç¬¦å·ï¼Œè·¯çº¿ A çš„æ‰€æœ‰ä»£ç ä¼šè¢«æ¡ä»¶ç¼–è¯‘æ’é™¤ï¼Œä¸ä¼šå½±å“ç¼–è¯‘å’Œè¿è¡Œã€‚

### å¯ç”¨è·¯çº¿ A

1. åœ¨ Hierarchy ä¸­é€‰ä¸­ DayNightManager å¯¹è±¡
2. åœ¨ Inspector ä¸­å‹¾é€‰ `Enable Route A`
3. æ¿€æ´» GlobalLightController å­å¯¹è±¡ï¼ˆå–æ¶ˆå‹¾é€‰ Inspector é¡¶éƒ¨çš„ç¦ç”¨çŠ¶æ€ï¼‰
4. æ¿€æ´» PointLightManager å­å¯¹è±¡
5. åœ¨ GlobalLightController å¯¹è±¡ä¸Šæ·»åŠ  `Light2D` ç»„ä»¶ï¼ˆç±»å‹é€‰ Globalï¼‰

### å…¨å±€å…‰ç…§æ›²çº¿

`globalLightIntensityCurve`ï¼ˆAnimationCurveï¼‰æ§åˆ¶ 24 å°æ—¶å…‰ç…§å¼ºåº¦å˜åŒ–ï¼š

| dayProgress | æ—¶é—´ | é»˜è®¤å¼ºåº¦ | è¯´æ˜ |
|-------------|------|----------|------|
| 0.00 | 06:00 | 0.7 | æ—¥å‡ºï¼Œå…‰ç…§æ¸å¼º |
| 0.15 | 09:00 | 0.9 | ä¸Šåˆ |
| 0.30 | 12:00 | 1.0 | æ­£åˆæœ€äº® |
| 0.45 | 15:00 | 0.9 | ä¸‹åˆ |
| 0.60 | 18:00 | 0.6 | æ—¥è½ |
| 0.80 | 22:00 | 0.3 | æ·±å¤œ |
| 1.00 | 02:00 | 0.2 | å‡Œæ™¨æœ€æš— |

æ›²çº¿ä½¿ç”¨ Auto åˆ‡çº¿æ¨¡å¼ï¼Œç¡®ä¿å¼ºåº¦å˜åŒ–å¹³æ»‘è¿ç»­ã€‚

`globalLightColorGradient` æ§åˆ¶å…‰ç…§è‰²æ¸©å˜åŒ–ï¼ˆä¸å­£èŠ‚æ— å…³çš„é€šç”¨è‰²æ¸©ï¼‰ï¼š

| ä½ç½® | æ—¶é—´ | RGB | è¯´æ˜ |
|------|------|-----|------|
| 0.00 | 06:00 | (1.0, 0.85, 0.65) | æš–è‰²æ—¥å‡º |
| 0.30 | 12:00 | (1.0, 0.98, 0.95) | è¿‘ç™½æ­£åˆ |
| 0.60 | 18:00 | (1.0, 0.80, 0.55) | æš–è‰²æ—¥è½ |
| 0.80 | 22:00 | (0.50, 0.55, 0.80) | å†·è“å¤œæ™š |
| 1.00 | 02:00 | (0.40, 0.42, 0.70) | æ·±è“å‡Œæ™¨ |

### URP æœªå®‰è£…æ—¶çš„è‡ªåŠ¨é™çº§

å¦‚æœé¡¹ç›®æ²¡æœ‰å®šä¹‰ `USE_URP`ï¼š
- DayNightManager ä¸­æ‰€æœ‰è·¯çº¿ A ç›¸å…³ä»£ç è¢«æ¡ä»¶ç¼–è¯‘æ’é™¤
- å³ä½¿ Inspector ä¸­å‹¾é€‰äº† `Enable Route A`ï¼Œè¿è¡Œæ—¶ä¹Ÿä¼šè‡ªåŠ¨ç¦ç”¨å¹¶è¾“å‡ºè­¦å‘Š
- ç³»ç»Ÿè‡ªåŠ¨å›é€€åˆ°çº¯è·¯çº¿ B æ¨¡å¼ï¼Œoverlay å¼ºåº¦ä½¿ç”¨ `overlayStrengthWithoutURP`

---

## 8. å¤œé—´å…‰æºé…ç½®

### ä¸ºå»ºç­‘/è·¯ç¯æ·»åŠ å¤œé—´å…‰æº

1. é€‰ä¸­éœ€è¦å¤œé—´å‘å…‰çš„ GameObjectï¼ˆå¦‚å»ºç­‘çª—æˆ·ã€è·¯ç¯ï¼‰
2. æ·»åŠ  `NightLightMarker` ç»„ä»¶
3. é…ç½®å‚æ•°ï¼š

| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|------|--------|------|
| maxIntensity | 1.0 | å®Œå…¨æ¿€æ´»æ—¶çš„å…‰ç…§å¼ºåº¦ |
| lightColor | é»„è‰² | å…‰æºé¢œè‰²ï¼ˆçª—æˆ·å»ºè®®æš–é»„ï¼Œè·¯ç¯å»ºè®®ç™½è‰²ï¼‰ |
| radius | 3.0 | å…‰ç…§åŠå¾„ï¼ˆä¸–ç•Œå•ä½ï¼‰ |

4. åœ¨åŒä¸€ GameObject ä¸Šæ·»åŠ  URP çš„ `Light2D` ç»„ä»¶ï¼ˆç±»å‹é€‰ Pointï¼‰
5. Light2D çš„é¢œè‰²å’ŒåŠå¾„ä¼šåœ¨è¿è¡Œæ—¶ç”± PointLightManager æ ¹æ® NightLightMarker çš„é…ç½®è‡ªåŠ¨è®¾ç½®

### æ—¶é—´æ§åˆ¶

| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|------|--------|------|
| nightLightActivateHour | 18 | å¤œé—´å…‰æºæ¿€æ´»æ—¶é—´ï¼ˆ18:00ï¼‰ |
| nightLightDeactivateHour | 6 | å¤œé—´å…‰æºå…³é—­æ—¶é—´ï¼ˆ06:00ï¼‰ |
| pointLightFadeDuration | 1.0s | æ·¡å…¥æ·¡å‡ºåŠ¨ç”»æ—¶é•¿ |

æ¿€æ´»æ—¶æ®µåˆ¤æ–­é€»è¾‘ï¼ˆæ”¯æŒè·¨åˆå¤œï¼‰ï¼š
- é»˜è®¤é…ç½® 18â†’6ï¼š18:00~05:59 ä¸ºæ¿€æ´»æ—¶æ®µ
- å¦‚æœé…ç½®ä¸º 20â†’4ï¼š20:00~03:59 ä¸ºæ¿€æ´»æ—¶æ®µ

### åŠ¨æ€åˆ·æ–°

PointLightManager åœ¨ä»¥ä¸‹æ—¶æœºè‡ªåŠ¨åˆ·æ–°å…‰æºåˆ—è¡¨ï¼š
- è·¯çº¿ A é¦–æ¬¡å¯ç”¨æ—¶
- è·¯çº¿ A å¼€å…³ä»å…³åˆ°å¼€åˆ‡æ¢æ—¶

å¦‚æœåœ¨è¿è¡Œæ—¶åŠ¨æ€æ·»åŠ äº†æ–°çš„ NightLightMarker ç‰©ä½“ï¼Œå¯ä»¥é€šè¿‡ä»£ç è°ƒç”¨ï¼š
```csharp
DayNightManager.Instance.pointLightMgr.RefreshLightList();
```

---

## 9. è·¯çº¿èåˆå‚æ•°

### èåˆé€»è¾‘

è·¯çº¿ A å’Œè·¯çº¿ B åŒæ—¶è¿è¡Œæ—¶ï¼Œéœ€è¦é™ä½è·¯çº¿ B çš„ overlay å¼ºåº¦ï¼Œé¿å…æ•ˆæœè¿‡åº¦å åŠ ï¼š

```
è·¯çº¿ A å…³é—­ï¼šoverlay å¼ºåº¦ = overlayStrengthWithoutURP (é»˜è®¤ 1.0)
è·¯çº¿ A å¼€å¯ï¼šoverlay å¼ºåº¦ = overlayStrengthWithURP (é»˜è®¤ 0.4)
```

### å‚æ•°è°ƒæ ¡

| å‚æ•° | é»˜è®¤å€¼ | è°ƒæ ¡å»ºè®® |
|------|--------|----------|
| overlayStrengthWithURP | 0.4 | è·¯çº¿ A æä¾›äº†çœŸå®å…‰ç…§ï¼Œoverlay åªéœ€è½»å¾®è‰²è°ƒè¡¥å……ã€‚0.3=æè½»å¾®ï¼Œ0.5=ä¸­ç­‰ |
| overlayStrengthWithoutURP | 1.0 | çº¯è·¯çº¿ B æ¨¡å¼ï¼Œoverlay æ˜¯å”¯ä¸€çš„å…‰å½±æ¥æºï¼Œé€šå¸¸ä¿æŒ 1.0 |

### åˆ‡æ¢è¿‡æ¸¡

è·¯çº¿ A å¼€å…³åˆ‡æ¢æ—¶ï¼Œoverlay å¼ºåº¦ä¼šåœ¨ 1.0 ç§’å†…å¹³æ»‘è¿‡æ¸¡ï¼Œé¿å…è§†è§‰è·³å˜ã€‚è¿™ä¸ªæ—¶é•¿æ˜¯ç¡¬ç¼–ç çš„å¸¸é‡ `ROUTE_TRANSITION_DURATION = 1.0f`ã€‚

---

## 10. è°ƒè¯•ä¸é¢„è§ˆ

### Inspector è°ƒè¯•å­—æ®µ

åœ¨ DayNightManager çš„ Inspector ä¸­ï¼Œè°ƒè¯•åˆ†ç»„æ˜¾ç¤ºå®æ—¶çŠ¶æ€ï¼š

| å­—æ®µ | è¯´æ˜ |
|------|------|
| Show Debug Info | å¼€å¯ååœ¨ Console è¾“å‡ºè¯¦ç»†æ—¥å¿—ï¼ˆæ•´ç‚¹æ£€æŸ¥ã€å¤©æ°”å˜åŒ–ã€å­£èŠ‚å˜åŒ–ç­‰ï¼‰ |
| Debug Final Color | å½“å‰æœ€ç»ˆå åŠ é¢œè‰²ï¼ˆåªè¯»ï¼‰ |
| Debug Brightness | å½“å‰äº®åº¦å€¼ 0-1ï¼ˆåªè¯»ï¼Œä½¿ç”¨æ ‡å‡†ç°åº¦å…¬å¼ 0.299R+0.587G+0.114Bï¼‰ |
| Debug Is Night | æ˜¯å¦ä¸ºå¤œæ™šæ¨¡å¼ï¼ˆåªè¯»ï¼Œå§”æ‰˜ç»™ TimeManager.IsNighttime()ï¼‰ |

### ContextMenu å¿«æ·é¢„è§ˆ

åœ¨ DayNightManager ç»„ä»¶ä¸Šå³é”®ï¼Œå¯ä»¥çœ‹åˆ° 5 ä¸ªé¢„è§ˆèœå•é¡¹ï¼š

| èœå•é¡¹ | dayProgress | å¯¹åº”æ—¶é—´ |
|--------|-------------|----------|
| ğŸŒ… é¢„è§ˆ 06:00ï¼ˆæ—¥å‡ºï¼‰ | 0.0 | 06:00 |
| â˜€ï¸ é¢„è§ˆ 12:00ï¼ˆæ­£åˆï¼‰ | 0.3 | 12:00 |
| ğŸŒ† é¢„è§ˆ 18:00ï¼ˆæ—¥è½ï¼‰ | 0.6 | 18:00 |
| ğŸŒ™ é¢„è§ˆ 22:00ï¼ˆæ·±å¤œï¼‰ | 0.8 | 22:00 |
| ğŸŒŒ é¢„è§ˆ 02:00ï¼ˆå‡Œæ™¨ï¼‰ | 1.0 | 02:00 |

åœ¨ Play æ¨¡å¼ä¸‹ç‚¹å‡»è¿™äº›èœå•é¡¹ï¼Œä¼šç«‹å³è·³åˆ°å¯¹åº”æ—¶é—´ç‚¹çš„é¢œè‰²æ•ˆæœï¼ŒConsole åŒæ—¶è¾“å‡ºé¢œè‰²å€¼å’Œäº®åº¦å€¼ã€‚

### å…¬å…±æŸ¥è¯¢æ¥å£

å…¶ä»–ç³»ç»Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹æ¥å£æŸ¥è¯¢å…‰å½±çŠ¶æ€ï¼š

```csharp
// è·å–å½“å‰å åŠ é¢œè‰²
Color color = DayNightManager.Instance.GetCurrentOverlayColor();

// è·å–å½“å‰äº®åº¦ï¼ˆ0=å…¨é»‘, 1=å…¨ç™½ï¼‰
float brightness = DayNightManager.Instance.GetCurrentBrightness();

// æ˜¯å¦ä¸ºå¤œæ™šæ¨¡å¼
bool isNight = DayNightManager.Instance.IsNightMode();

// æ‰‹åŠ¨è°ƒæ•´å åŠ å¼ºåº¦ï¼ˆè¦†ç›–è·¯çº¿èåˆé€»è¾‘ï¼‰
DayNightManager.Instance.SetOverlayStrength(0.5f);
```

---

## 11. å¸¸è§é—®é¢˜æ’æŸ¥

### Q1ï¼šè¿›å…¥ Play æ¨¡å¼åç”»é¢æ²¡æœ‰ä»»ä½•å˜åŒ–

æ’æŸ¥æ­¥éª¤ï¼š
1. æ£€æŸ¥ Console æ˜¯å¦æœ‰ `[DayNightManager] åˆå§‹åŒ–å®Œæˆ` æ—¥å¿—
2. å¦‚æœæ²¡æœ‰ â†’ DayNightManager æœªæ¿€æ´»æˆ– config ä¸ºç©ºï¼Œé‡æ–°æ‰§è¡Œ `Tools > Setup DayNight Scene`
3. å¦‚æœæœ‰ â†’ æ£€æŸ¥ DayNightOverlay å­å¯¹è±¡æ˜¯å¦æ¿€æ´»ï¼ŒSpriteRenderer æ˜¯å¦æœ‰ Multiply æè´¨
4. æ£€æŸ¥ Sorting Layer è®¾ç½®ï¼šDayNightOverlay åº”åœ¨ CloudShadow å±‚ Order=100

### Q2ï¼šç”»é¢å…¨é»‘æˆ–è¿‡æš—

å¯èƒ½åŸå› ï¼š
- å­£èŠ‚ Gradient çš„å¤œæ™šå…³é”®å¸§ RGB å€¼å¤ªä½ï¼ˆä½äº 0.2ï¼‰
- å¤©æ°”ä¿®æ­£å¼ºåº¦ `weatherTintStrength` è¿‡é«˜ï¼ˆè¶…è¿‡ 0.7ï¼‰
- å½“å‰æ—¶é—´å¤„äºæ·±å¤œï¼ˆ22:00-02:00ï¼‰ï¼Œè¿™æ˜¯æ­£å¸¸çš„æš—è‰²æ•ˆæœ

è§£å†³æ–¹æ¡ˆï¼š
- æäº® Gradient å¤œæ™šå…³é”®å¸§çš„ RGB å€¼ï¼ˆå»ºè®®ä¸ä½äº 0.25ï¼‰
- é™ä½ `weatherTintStrength` åˆ° 0.3-0.5
- ä½¿ç”¨ ContextMenu é¢„è§ˆä¸åŒæ—¶é—´ç‚¹ç¡®è®¤æ˜¯å¦æ­£å¸¸

### Q3ï¼šé¢œè‰²å˜åŒ–æœ‰æ˜æ˜¾è·³å˜

å¯èƒ½åŸå› ï¼š
- Gradient å…³é”®å¸§ä¹‹é—´é—´è·è¿‡å¤§ä¸”é¢œè‰²å·®å¼‚è¿‡å¤§
- è¿‡æ¸¡å‚æ•°è®¾ç½®è¿‡çŸ­

è§£å†³æ–¹æ¡ˆï¼š
- åœ¨ Gradient ä¸­å¢åŠ ä¸­é—´å…³é”®å¸§ï¼ˆå¦‚ 09:00ã€15:00ï¼‰ä½¿è¿‡æ¸¡æ›´å¹³æ»‘
- é€‚å½“å¢åŠ è¿‡æ¸¡æ—¶é•¿å‚æ•°

### Q4ï¼šDayNightOverlay è¾¹ç¼˜éœ²å‡º

å¯èƒ½åŸå› ï¼š
- æ‘„åƒæœºç§»åŠ¨é€Ÿåº¦è¿‡å¿«ï¼ŒOverlay è·Ÿéšæœ‰ä¸€å¸§å»¶è¿Ÿ
- `coverageMargin` å€ç‡ä¸å¤Ÿ

è§£å†³æ–¹æ¡ˆï¼š
- DayNightOverlay çš„ `coverageMargin` é»˜è®¤ 1.2ï¼ˆå³è§†å£çš„ 120%ï¼‰ï¼Œå¦‚æœä»æœ‰éœ²è¾¹å¯ä»¥æé«˜åˆ° 1.5
- Overlay åœ¨ `LateUpdate` ä¸­è·Ÿéšæ‘„åƒæœºï¼Œæ­£å¸¸æƒ…å†µä¸‹ä¸ä¼šéœ²è¾¹

### Q5ï¼šä¸ CloudShadowManager è§†è§‰å†²çª

ä¸¤è€…éƒ½ä½¿ç”¨ Multiply æ··åˆæ¨¡å¼ï¼Œæ•ˆæœæ˜¯å åŠ çš„ï¼š
- CloudShadow åœ¨ Order=0ï¼ŒDayNightOverlay åœ¨ Order=100
- æœ€ç»ˆæ•ˆæœ = åŸå§‹ç”»é¢ Ã— CloudShadow é¢œè‰² Ã— DayNightOverlay é¢œè‰²
- å¦‚æœå åŠ åå¤ªæš—ï¼Œå¯ä»¥é™ä½ `overlayStrengthWithoutURP` åˆ° 0.7-0.8

### Q6ï¼šè·¯çº¿ A å¯ç”¨åç¼–è¯‘æŠ¥é”™

ç¡®è®¤ä»¥ä¸‹æ­¥éª¤ï¼š
1. å·²å®‰è£… URP åŒ…ï¼š`com.unity.render-pipelines.universal`
2. å·²åœ¨ Project Settings > Player > Scripting Define Symbols ä¸­æ·»åŠ  `USE_URP`
3. æ·»åŠ åç­‰å¾… Unity é‡æ–°ç¼–è¯‘ï¼ˆåº•éƒ¨è¿›åº¦æ¡ï¼‰

å¦‚æœä¸éœ€è¦è·¯çº¿ Aï¼Œä¸æ·»åŠ  `USE_URP` å³å¯ï¼Œæ‰€æœ‰è·¯çº¿ A ä»£ç ä¼šè¢«æ¡ä»¶ç¼–è¯‘æ’é™¤ã€‚

### Q7ï¼šå¤œé—´å…‰æºä¸äº®

æ’æŸ¥æ­¥éª¤ï¼š
1. ç¡®è®¤è·¯çº¿ A å·²å¯ç”¨ï¼ˆDayNightManager çš„ `Enable Route A` å·²å‹¾é€‰ï¼‰
2. ç¡®è®¤ PointLightManager å­å¯¹è±¡å·²æ¿€æ´»
3. ç¡®è®¤ç›®æ ‡ç‰©ä½“ä¸ŠåŒæ—¶æœ‰ `NightLightMarker` å’Œ `Light2D` ç»„ä»¶
4. ç¡®è®¤å½“å‰æ¸¸æˆæ—¶é—´åœ¨æ¿€æ´»æ—¶æ®µå†…ï¼ˆé»˜è®¤ 18:00-06:00ï¼‰
5. æ£€æŸ¥ Console æ˜¯å¦æœ‰ `æ‰«æå®Œæˆï¼Œæ‰¾åˆ° N ä¸ªå¤œé—´å…‰æº` æ—¥å¿—

---

## 12. å‚æ•°é€ŸæŸ¥è¡¨

### è·¯çº¿ B æ ¸å¿ƒå‚æ•°

| å‚æ•° | ä½ç½® | é»˜è®¤å€¼ | èŒƒå›´ | å½±å“ |
|------|------|--------|------|------|
| å­£èŠ‚ Gradient Ã— 4 | DayNightConfig | é¢„è®¾ | Gradient | 24h è‰²è°ƒå˜åŒ– |
| rainyTint | DayNightConfig | (0.55,0.55,0.6) | Color | é›¨å¤©ç”»é¢åç°æš— |
| witheringTint | DayNightConfig | (0.85,0.75,0.45) | Color | æ¯èå¤©ç”»é¢åé»„ |
| weatherTintStrength | DayNightConfig | 0.5 | 0-1 | å¤©æ°”ä¿®æ­£å¼ºåº¦ |
| weatherTransitionDuration | DayNightConfig | 1.5s | >0 | å¤©æ°”è¿‡æ¸¡æ—¶é•¿ |
| timeJumpTransitionDuration | DayNightConfig | 0.8s | >0 | ç¡è§‰è·³æ—¶é—´è¿‡æ¸¡ |
| seasonTransitionDuration | DayNightConfig | 2.0s | >0 | å­£èŠ‚è¿‡æ¸¡æ—¶é•¿ |
| overlayStrengthWithoutURP | DayNightConfig | 1.0 | 0-1 | çº¯è·¯çº¿ B å åŠ å¼ºåº¦ |
| coverageMargin | DayNightOverlay | 1.2 | >1 | è§†å£è¦†ç›–è¾¹è·å€ç‡ |
| sortingLayerName | DayNightOverlay | CloudShadow | string | Sorting Layer |
| sortingOrder | DayNightOverlay | 100 | int | Sorting Order |

### è·¯çº¿ A å‚æ•°

| å‚æ•° | ä½ç½® | é»˜è®¤å€¼ | èŒƒå›´ | å½±å“ |
|------|------|--------|------|------|
| enableRouteA | DayNightManager | false | bool | è·¯çº¿ A æ€»å¼€å…³ |
| globalLightIntensityCurve | DayNightConfig | é¢„è®¾æ›²çº¿ | AnimationCurve | 24h å…‰ç…§å¼ºåº¦ |
| globalLightColorGradient | DayNightConfig | é¢„è®¾ | Gradient | 24h å…‰ç…§è‰²æ¸© |
| nightLightActivateHour | DayNightConfig | 18 | 0-24 | å¤œé—´å…‰æºæ¿€æ´»æ—¶é—´ |
| nightLightDeactivateHour | DayNightConfig | 6 | 0-24 | å¤œé—´å…‰æºå…³é—­æ—¶é—´ |
| pointLightFadeDuration | DayNightConfig | 1.0s | >0 | ç‚¹å…‰æºæ·¡å…¥æ·¡å‡º |
| overlayStrengthWithURP | DayNightConfig | 0.4 | 0-1 | è·¯çº¿ A æ—¶ overlay å¼ºåº¦ |

### NightLightMarker å‚æ•°

| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|------|--------|------|
| maxIntensity | 1.0 | å…‰æºæœ€å¤§å¼ºåº¦ |
| lightColor | é»„è‰² | å…‰æºé¢œè‰² |
| radius | 3.0 | å…‰ç…§åŠå¾„ |

---

## æ–‡ä»¶æ¸…å•

| æ–‡ä»¶ | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| DayNightConfig.cs | Assets/YYY_Scripts/Service/Rendering/ | ScriptableObject é…ç½®ç±» |
| DayNightManager.cs | Assets/YYY_Scripts/Service/Rendering/ | æ ¸å¿ƒåè°ƒå™¨å•ä¾‹ |
| DayNightOverlay.cs | Assets/YYY_Scripts/Service/Rendering/ | è·¯çº¿ B å…¨å±è‰²è°ƒå åŠ  |
| GlobalLightController.cs | Assets/YYY_Scripts/Service/Rendering/ | è·¯çº¿ A å…¨å±€å…‰æºæ§åˆ¶ |
| PointLightManager.cs | Assets/YYY_Scripts/Service/Rendering/ | è·¯çº¿ A å±€éƒ¨å…‰æºç®¡ç† |
| NightLightMarker.cs | Assets/YYY_Scripts/Service/Rendering/ | è·¯çº¿ A å¤œé—´å…‰æºæ ‡è®° |
| DayNightConfigCreator.cs | Assets/Editor/ | ç¼–è¾‘å™¨å·¥å…·ï¼ˆ3 ä¸ªèœå•é¡¹ï¼‰ |
| DayNightMultiply.mat | Assets/444_Shaders/Material/ | Multiply æ··åˆæ¨¡å¼æè´¨ |
| DayNightConfig.asset | Assets/111_Data/ | é…ç½®èµ„äº§å®ä¾‹ï¼ˆéœ€é€šè¿‡èœå•åˆ›å»ºï¼‰ |
| DayNightSystemTests.cs | Assets/YYY_Tests/Editor/ | 15 ä¸ª EditMode æµ‹è¯• |
