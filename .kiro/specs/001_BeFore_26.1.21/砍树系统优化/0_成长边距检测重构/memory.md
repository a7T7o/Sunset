# 成长边距检测重构 - 开发记忆

## 模块概述

重构树木成长空间检测系统，从基于 Sprite Bounds 的检测改为基于 Collider 边界的精确边距检测。每个阶段配置独立的上下/左右边距参数，检测时遍历所有指定标签的 Collider，确保边距内无障碍物才允许成长。

## 当前状态

- **完成度**: 100% ✅
- **最后更新**: 2026-01-21 之前
- **状态**: ✅ 已完成

## 包含文件

| 文件 | 说明 |
|------|------|
| `requirements.md` | 需求文档（阶段独立边距参数、障碍物标签多选） |
| `design.md` | 设计文档 |
| `tasks.md` | 任务列表 |

## 核心功能

- 每个树木阶段（StageConfig）配置独立的上下边距和左右边距
- 使用 MaskField 多选下拉框配置障碍物检测标签（Tree/Rock/Building 等）
- 基于 Collider 边界检测，不再依赖 Sprite Bounds
- 边距内无障碍物才允许成长到下一阶段
