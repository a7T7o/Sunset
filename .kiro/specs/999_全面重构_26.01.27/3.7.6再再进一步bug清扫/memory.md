# 3.7.6 å†å†è¿›ä¸€æ­¥ bug æ¸…æ‰« - å¼€å‘è®°å¿†

## æ¨¡å—æ¦‚è¿°

ä¿®å¤æ ‘æœ¨å­£èŠ‚æ¸å˜çŠ¶æ€å­˜æ¡£é—®é¢˜ï¼Œç¡®ä¿æ ‘æœ¨çš„å­£èŠ‚æ ·å¼åœ¨å­˜æ¡£/è¯»æ¡£åèƒ½å¤Ÿæ­£ç¡®æ¢å¤ã€‚

## å½“å‰çŠ¶æ€

- **å®Œæˆåº¦**: 100%ï¼ˆä¿®å¤å®Œæˆï¼‰
- **æœ€åæ›´æ–°**: 2026-02-05
- **çŠ¶æ€**: âœ… å·²å®Œæˆ

---

## ä¼šè¯è®°å½•

### ä¼šè¯ 1 - 2026-02-05ï¼ˆå­£èŠ‚æ¸å˜å­˜æ¡£é—®é¢˜åˆ†æï¼‰

**ç”¨æˆ·éœ€æ±‚**:
> æ ‘æœ¨æ ·å¼æ²¡æœ‰æ­£ç¡®åŠ è½½ï¼Œæ²¡æœ‰è€ƒè™‘åˆ°å­£èŠ‚å˜æ¢æ ‘æœ¨æ ·å¼æ¸å˜çš„å†…å®¹ï¼Œéœ€è¦è®°å½•ç¬¬å‡ å¤©å‡ ç‚¹é’Ÿç²¾ç¡®åˆ°åˆ†é’Ÿï¼Œè¿˜æœ‰å¯¹äºå“ªäº›æ ‘æœ¨æ¸å˜äº†å“ªäº›æ²¡æœ‰æ¸å˜éœ€è¦åˆ†è¾¨æ¸…æ¥š

**å®Œæˆä»»åŠ¡**:
1. âœ… é˜…è¯»å†å²æ–‡æ¡£ï¼Œäº†è§£å­£èŠ‚æ¸å˜ç³»ç»Ÿè®¾è®¡
2. âœ… åˆ†æå½“å‰ä»£ç å®ç°
3. âœ… ç”Ÿæˆæ€è€ƒæ–‡æ¡£

**ä¿®æ”¹æ–‡ä»¶**:
- `.kiro/specs/999_å…¨é¢é‡æ„_26.01.27/3.7.6å†å†è¿›ä¸€æ­¥bugæ¸…æ‰«/memory.md` - åˆ›å»º
- `.kiro/specs/999_å…¨é¢é‡æ„_26.01.27/3.7.6å†å†è¿›ä¸€æ­¥bugæ¸…æ‰«/å­£èŠ‚æ¸å˜å­˜æ¡£é—®é¢˜åˆ†æ.md` - åˆ›å»º

---

### ä¼šè¯ 2 - 2026-02-05ï¼ˆé”è¯„001 å®¡æ ¸ + å†å² memory åˆ†æï¼‰

**ç”¨æˆ·éœ€æ±‚**:
> ä½ å…ˆå®¡æ ¸è¿™ä¸ªé”è¯„001ï¼Œç„¶åæˆ‘è¯´çš„å†å²memoryè¿˜åŒ…æ‹¬3å¼€å¤´çš„å­å·¥ä½œåŒºï¼Œè¯·ä½ ä¸€å¹¶è¿›è¡Œåˆ†æå’Œæ€è€ƒ

**å®Œæˆä»»åŠ¡**:
1. âœ… é˜…è¯»é”è¯„001ï¼ˆé”è¯„029ï¼šæ—¶é—´ç²¾åº¦çš„å‚²æ…¢ä¸ç§å­ç¨³å®šæ€§ï¼‰
2. âœ… é˜…è¯» 3.7.2 å­˜æ¡£bugå¤§æ¸…æ‰« memory
3. âœ… é˜…è¯» 3.7.3 æ¶ˆå¤±bug memory
4. âœ… é˜…è¯» 3.7.4 è¿›ä¸€æ­¥bugæ¸…æ‰« memory
5. âœ… é˜…è¯» 3.7.5 è‡ªåŠ¨åŒ–å­˜æ¡£ memory
6. âœ… æ›´æ–°åˆ†ææ–‡æ¡£åˆ° V2ï¼Œæ•´åˆé”è¯„001çš„ä¸‰ä¸ªæ ¸å¿ƒé—®é¢˜

**é”è¯„001 æ ¸å¿ƒé—®é¢˜**:

| # | é—®é¢˜ | æˆ‘çš„å›åº” |
|---|------|---------|
| 1 | æ—¶é—´ç²¾åº¦å‚²æ…¢ + åŠ è½½é¡ºåº | âœ… æ¥å—ï¼Œå¿…é¡»éªŒè¯ TimeManager å…ˆäº TreeController æ¢å¤ |
| 2 | åŠ¨æ€æ ‘ç§å­ç¨³å®šæ€§ | âœ… æ¥å—ï¼Œæ”¹ç”¨ `persistentId.GetHashCode()` ä½œä¸ºç§å­ |
| 3 | æ—§å­˜æ¡£å…¼å®¹æ€§ | âš ï¸ éƒ¨åˆ†æ¥å—ï¼Œé‡‡ç”¨"ä¸€æ¬¡æ€§è§†è§‰å›é€€"ç­–ç•¥ |

**å†å² memory å…³é”®å‘ç°**:

| å·¥ä½œåŒº | å…³é”®å†…å®¹ |
|--------|---------|
| 3.7.2 | åŠ¨æ€å¯¹è±¡é‡å»ºç³»ç»Ÿï¼ŒTreeSaveData å·²æœ‰ hasTransitionedToNextSeason å­—æ®µä½†æœªä½¿ç”¨ |
| 3.7.3 | GUID æ¼‚ç§»é—®é¢˜å·²ä¿®å¤ï¼Œä½¿ç”¨ persistentId ä¿è¯ç¨³å®š |
| 3.7.4 | çŸ³å¤´å‡æ­»æœºåˆ¶ã€ç®±å­ IsEmpty ä¿®å¤ |
| 3.7.5 | PrefabDatabase è‡ªåŠ¨åŒ–æ–¹æ¡ˆï¼Œæ¸²æŸ“å±‚çº§å­˜æ¡£å·²å®ç° |

**ä¿®æ”¹æ–‡ä»¶**:
- `å­£èŠ‚æ¸å˜å­˜æ¡£é—®é¢˜åˆ†æ.md` - æ›´æ–°åˆ° V2ï¼Œæ•´åˆé”è¯„001å®¡æ ¸æ„è§

**é—ç•™é—®é¢˜**:
- [ ] ç­‰å¾…ç”¨æˆ·å®¡æ ¸ V2 åˆ†ææ–‡æ¡£
- [ ] ç”¨æˆ·ç¡®è®¤åå¼€å§‹å®æ–½ä¿®å¤

---

## é”è¯„å¤„ç†è®°å½•

### é”è¯„001ï¼ˆé”è¯„029ï¼šæ—¶é—´ç²¾åº¦çš„å‚²æ…¢ä¸ç§å­ç¨³å®šæ€§ï¼‰

**è¯„åˆ†**: 85åˆ† (B+)

**æ ¸å¿ƒæŒ‡ä»¤**:
1. éªŒè¯åŠ è½½é¡ºåºï¼šTimeManager å¿…é¡»å…ˆäº TreeController æ¢å¤
2. ä¿®æ­£ç§å­è®¡ç®—ï¼šä½¿ç”¨ `persistentId.GetHashCode()` è€Œé `GetInstanceID()`
3. å¤„ç†æ—§å­˜æ¡£å…¼å®¹æ€§ï¼šæ˜ç¡®ç­–ç•¥ï¼ˆæ™ºèƒ½æ¨æ–­ or ä¸€æ¬¡æ€§å›é€€ï¼‰

**æˆ‘çš„å›åº”**:
- âœ… é—®é¢˜ä¸€ï¼šæ¥å—ï¼Œå°†éªŒè¯åŠ è½½é¡ºåº
- âœ… é—®é¢˜äºŒï¼šæ¥å—ï¼Œå°†ä¿®æ­£ç§å­è®¡ç®—
- âš ï¸ é—®é¢˜ä¸‰ï¼šé‡‡ç”¨"ä¸€æ¬¡æ€§è§†è§‰å›é€€"ç­–ç•¥ï¼Œæ™ºèƒ½æ¨æ–­æœ‰é£é™©

---

## å…³é”®å†³ç­–

| å†³ç­– | åŸå›  | æ—¥æœŸ |
|------|------|------|
| å­˜å‚¨æ¸å˜çŠ¶æ€ï¼ˆæ–¹æ¡ˆ Aï¼‰ | å®Œå…¨è§£å†³é—®é¢˜ï¼Œç¬¦åˆ"æ¸å˜ä¸å¯é€†"è®¾è®¡ | 2026-02-05 |
| ä½¿ç”¨ persistentId.GetHashCode() ä½œä¸ºç§å­ | ä¿è¯åŠ¨æ€æ ‘ç§å­ç¨³å®šæ€§ | 2026-02-05 |
| æ—§å­˜æ¡£é‡‡ç”¨"ä¸€æ¬¡æ€§è§†è§‰å›é€€"ç­–ç•¥ | æ™ºèƒ½æ¨æ–­æœ‰é£é™©ï¼Œä¸€æ¬¡æ€§å›é€€å¯æ¥å— | 2026-02-05 |

---

## å…³é”®æ–‡æ¡£ç´¢å¼•

| æ–‡æ¡£ | ä½ç½® | è¯´æ˜ |
|------|------|------|
| å­£èŠ‚æ¸å˜ç³»ç»Ÿæœ€ç»ˆæ¶æ„ | `Assets/YYY_Scripts/_...._/å­£èŠ‚æ¸å˜ç³»ç»Ÿ_æœ€ç»ˆæ¶æ„.md` | æ ¸å¿ƒè®¾è®¡æ–‡æ¡£ |
| é”è¯„001 | `.kiro/specs/999_å…¨é¢é‡æ„_26.01.27/3.7.6å†å†è¿›ä¸€æ­¥bugæ¸…æ‰«/é”è¯„001.md` | Code Reaper å®¡æ ¸æ„è§ |
| 3.7.2 memory | `.kiro/specs/999_å…¨é¢é‡æ„_26.01.27/3.7.2å­˜æ¡£bugå¤§æ¸…æ‰«/memory.md` | åŠ¨æ€å¯¹è±¡é‡å»ºç³»ç»Ÿ |
| 3.7.3 memory | `.kiro/specs/999_å…¨é¢é‡æ„_26.01.27/3.7.3æ¶ˆå¤±bug/memory.md` | GUID æ¼‚ç§»ä¿®å¤ |
| 3.7.4 memory | `.kiro/specs/999_å…¨é¢é‡æ„_26.01.27/3.7.4è¿›ä¸€æ­¥bugæ¸…æ‰«/memory.md` | çŸ³å¤´/ç®±å­ä¿®å¤ |
| 3.7.5 memory | `.kiro/specs/999_å…¨é¢é‡æ„_26.01.27/3.7.5è‡ªåŠ¨åŒ–å­˜æ¡£/memory.md` | PrefabDatabase æ–¹æ¡ˆ |

---

## ç›¸å…³ä»£ç æ–‡ä»¶

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `Assets/YYY_Scripts/Controller/TreeController.cs` | æ ‘æœ¨æ§åˆ¶å™¨ï¼ˆéœ€ä¿®æ”¹ Save/Load/GetNormalSpriteï¼‰ |
| `Assets/YYY_Scripts/Data/Core/SaveDataDTOs.cs` | TreeSaveData å·²æœ‰å­—æ®µï¼Œéœ€å¯ç”¨ |
| `Assets/YYY_Scripts/Service/SeasonManager.cs` | æ¸å˜è¿›åº¦è®¡ç®— |
| `Assets/YYY_Scripts/Data/Core/SaveManager.cs` | éœ€éªŒè¯åŠ è½½é¡ºåº |


### ä¼šè¯ 3 - 2026-02-05ï¼ˆé”è¯„002 æ‰§è¡Œ - æç®€ä¿®å¤ï¼‰

**ç”¨æˆ·éœ€æ±‚**:
> ç»§ç»­æ‰§è¡Œé”è¯„002çš„æŒ‡ä»¤

**é”è¯„002 æ ¸å¿ƒæ´å¯Ÿ**:

é”è¯„002 æŒ‡å‡ºäº†ä¸€ä¸ªå…³é”®ç®€åŒ–ï¼š**ä¸éœ€è¦å­˜å‚¨ `hasTransitioned`**ï¼

åŸå› ï¼š
1. æ¸å˜åˆ¤æ–­å…¬å¼ï¼š`treeSeedValue < progress`
2. å¦‚æœ `treeSeedValue` æ˜¯ç¨³å®šçš„ï¼ˆåŸºäº `persistentId.GetHashCode()`ï¼‰
3. ä¸” `progress` æ˜¯ä»æ—¶é—´è®¡ç®—çš„ï¼ˆTimeManager å…ˆäº TreeController æ¢å¤ï¼‰
4. é‚£ä¹ˆè¯»æ¡£åï¼Œæ¸å˜çŠ¶æ€å¯ä»¥**å®æ—¶æ¨å¯¼**ï¼Œæ— éœ€å­˜å‚¨

**éªŒè¯ç»“è®º**:
- âœ… åŠ è½½é¡ºåºæ­£ç¡®ï¼šTimeManager åœ¨ PersistentManagers ä¸‹ï¼Œå…ˆäºåœºæ™¯å¯¹è±¡åˆå§‹åŒ–
- âœ… åªéœ€ä¿®æ”¹ç§å­è®¡ç®—æ–¹å¼ï¼Œä» `GetInstanceID()` æ”¹ä¸º `persistentId.GetHashCode()`

**å®Œæˆä»»åŠ¡**:
1. âœ… éªŒè¯é”è¯„002çš„åˆ†æé€»è¾‘
2. âœ… ä¿®æ”¹ TreeController.cs ä¸­çš„æ¸å˜ç§å­è®¡ç®—
3. âœ… ç§»é™¤ Start() ä¸­ä¸å†éœ€è¦çš„ treeID èµ‹å€¼
4. âœ… æ›´æ–° treeID å­—æ®µæ³¨é‡Šä¸º"å·²åºŸå¼ƒ"

**ä¿®æ”¹æ–‡ä»¶**:
- `TreeController.cs` - ä¿®æ”¹æ¸å˜ç§å­è®¡ç®—ï¼Œä½¿ç”¨ `persistentId.GetHashCode()` æ›¿ä»£ `GetInstanceID()`

**ä»£ç å˜æ›´è¯¦æƒ…**:

```csharp
// ä¿®æ”¹å‰ï¼ˆç¬¬ 1478 è¡Œï¼‰ï¼š
int seed = treeID + currentStageIndex * 100;

// ä¿®æ”¹åï¼š
int seed = Mathf.Abs(persistentId.GetHashCode()) + currentStageIndex * 100;
```

**ä¿®å¤åŸç†**:
- `GetInstanceID()` æ¯æ¬¡è¿è¡Œéƒ½ä¸åŒ â†’ è¯»æ¡£å treeID å˜åŒ– â†’ treeSeedValue å˜åŒ– â†’ æ¸å˜çŠ¶æ€ä¸ä¸€è‡´
- `persistentId.GetHashCode()` åŸºäº GUID â†’ å­˜æ¡£åä¸å˜ â†’ treeSeedValue ä¸å˜ â†’ æ¸å˜çŠ¶æ€ä¸€è‡´

**é—ç•™é—®é¢˜**:
- æ— 

---

## é”è¯„å¤„ç†è®°å½•

### é”è¯„002ï¼ˆé”è¯„030ï¼šåˆ†æé€šè¿‡ï¼Œè“å›¾æ„å»ºï¼‰

**è¯„åˆ†**: 95åˆ† (S)

**æ ¸å¿ƒæ´å¯Ÿ**:
- ä¸éœ€è¦å­˜å‚¨ `hasTransitioned`ï¼Œå› ä¸ºå¯ä»¥å®æ—¶æ¨å¯¼
- åªéœ€ä¿®æ”¹ç§å­è®¡ç®—æ–¹å¼å³å¯

**æ‰§è¡Œç»“æœ**: âœ… å·²å®Œæˆæç®€ä¿®å¤



### ä¼šè¯ 4 - 2026-02-05ï¼ˆä¿®å¤æ¸å˜è¿›åº¦æœªæ›´æ–°é—®é¢˜ï¼‰

**ç”¨æˆ·åé¦ˆ**:
> æƒ…å†µæ˜¯å¹¶æ²¡æœ‰æ”¹å–„ï¼Œæˆ‘ç°åœ¨æµ‹è¯•çš„æ­¥éª¤æ˜¯å…ˆè·³è½¬åˆ°æ˜¥å­£15~28ä¸­çš„ä»»æ„ä¸€å¤©ç„¶åä¿å­˜æ¸¸æˆå†å…³é—­æ¸¸æˆé‡æ–°å¯åŠ¨ç„¶åç›´æ¥åŠ è½½ï¼Œç°åœ¨çš„ç»“æœè¿˜æ˜¯æ²¡æœ‰æ­£ç¡®æ˜¾ç¤ºå­£èŠ‚æ¸å˜æƒ…å†µ

**é—®é¢˜åˆ†æ**:

ä¹‹å‰çš„ä¿®å¤åªè§£å†³äº†ç§å­ç¨³å®šæ€§é—®é¢˜ï¼Œä½†é—æ¼äº†ä¸€ä¸ªå…³é”®é—®é¢˜ï¼š**æ¸å˜è¿›åº¦æ²¡æœ‰åœ¨è¯»æ¡£æ—¶æ›´æ–°**ï¼

**æ ¹æœ¬åŸå› **:
1. `TimeManager.SetTime()` æ¢å¤æ—¶é—´åï¼Œåªåœ¨å­£èŠ‚å˜åŒ–æ—¶æ‰è°ƒç”¨ `SeasonManager.SetSeason()`
2. å¦‚æœå­˜æ¡£å’Œå½“å‰å­£èŠ‚ç›¸åŒï¼ˆå¦‚éƒ½æ˜¯æ˜¥å¤©ï¼‰ï¼Œ`SetSeason()` ä¸ä¼šè¢«è°ƒç”¨
3. `SeasonManager.SetSeason()` åŸæœ¬ä¹Ÿæ²¡æœ‰è°ƒç”¨ `UpdateVegetationSeason()` æ¥æ›´æ–°æ¸å˜è¿›åº¦
4. ç»“æœï¼š`seasonTransitionProgress` ä¿æŒé»˜è®¤å€¼ 0ï¼Œæ‰€æœ‰æ ‘éƒ½æ˜¾ç¤ºå½“å‰å­£èŠ‚

**ä¿®å¤å†…å®¹**:

1. **SeasonManager.SetSeason()** - æ·»åŠ  `UpdateVegetationSeason()` è°ƒç”¨
   ```csharp
   // ğŸ”¥ 3.7.6 ä¿®å¤ï¼šSetSeason åå¿…é¡»æ›´æ–°æ¸å˜è¿›åº¦
   UpdateVegetationSeason();
   ```

2. **TimeManager.SetTime()** - æ— è®ºå­£èŠ‚æ˜¯å¦å˜åŒ–ï¼Œéƒ½è°ƒç”¨ `SeasonManager.SetSeason()`
   ```csharp
   // ğŸ”¥ 3.7.6 ä¿®å¤ï¼šæ— è®ºå­£èŠ‚æ˜¯å¦å˜åŒ–ï¼Œéƒ½è¦é€šçŸ¥ SeasonManager æ›´æ–°æ¸å˜è¿›åº¦
   if (SeasonManager.Instance != null)
   {
       SeasonManager.Instance.SetSeason(currentSeason);
   }
   ```

**ä¿®æ”¹æ–‡ä»¶**:
- `SeasonManager.cs` - SetSeason() ä¸­æ·»åŠ  UpdateVegetationSeason() è°ƒç”¨
- `TimeManager.cs` - SetTime() ä¸­æ— æ¡ä»¶è°ƒç”¨ SeasonManager.SetSeason()

**ä¿®å¤é“¾è·¯**:
```
è¯»æ¡£ â†’ SaveManager.LoadGame()
     â†’ RestoreGameTimeData()
     â†’ TimeManager.SetTime(year, season, day, hour, minute)
     â†’ SeasonManager.SetSeason(season)  // ğŸ”¥ ç°åœ¨æ— æ¡ä»¶è°ƒç”¨
     â†’ UpdateVegetationSeason()         // ğŸ”¥ ç°åœ¨ä¼šè¢«è°ƒç”¨
     â†’ seasonTransitionProgress æ›´æ–°    // ğŸ”¥ æ¸å˜è¿›åº¦æ­£ç¡®
     â†’ RestoreAllFromSaveData()
     â†’ TreeController.Load()
     â†’ UpdateSprite()
     â†’ GetNormalSprite()
     â†’ GetTransitionProgress() è¿”å›æ­£ç¡®å€¼
     â†’ æ ‘æœ¨æ˜¾ç¤ºæ­£ç¡®çš„æ¸å˜çŠ¶æ€
```

---

### ä¼šè¯ 5 - 2026-02-05ï¼ˆä¿®å¤ç®±å­å†…å®¹ç¬¬ä¸€æ¬¡åŠ è½½æ¶ˆå¤±é—®é¢˜ï¼‰

**ç”¨æˆ·åé¦ˆ**:
> ç®±å­å†…æ”¾å…¥å†…å®¹ç„¶åä¿å­˜ï¼Œæ­¤æ—¶å†æ‹¿å‡ºç®±å­çš„å†…å®¹å¹¶ä¸”æŒ–æ‰ç®±å­ï¼Œç„¶åæˆ‘å†åŠ è½½å­˜æ¡£ï¼Œæ­¤æ—¶åªä¼šå¤åŸç®±å­ï¼Œä½†æ˜¯ç®±å­çš„å†…å®¹æ¶ˆå¤±ï¼Œä½†æ˜¯æ­¤æ—¶äºŒæ¬¡åŠ è½½åˆä¼šæ¢å¤ï¼Œä¹Ÿå°±æ˜¯ä½ çš„é¡ºåºå¤„ç†å­˜åœ¨é—®é¢˜

**é—®é¢˜åˆ†æ**:

ç”¨æˆ·æµ‹è¯•åœºæ™¯ï¼š
1. ç®±å­å†…æ”¾å…¥å†…å®¹ â†’ ä¿å­˜
2. æ‹¿å‡ºå†…å®¹ + æŒ–æ‰ç®±å­
3. åŠ è½½å­˜æ¡£
4. **ç¬¬ä¸€æ¬¡åŠ è½½**ï¼šç®±å­å¤åŸäº†ï¼Œä½†å†…å®¹æ¶ˆå¤±
5. **ç¬¬äºŒæ¬¡åŠ è½½**ï¼šå†…å®¹æ¢å¤

**æ ¹æœ¬åŸå› **:

é—®é¢˜å‡ºåœ¨ `DynamicObjectFactory.TryReconstructChest()` é‡å»ºç®±å­æ—¶çš„æ‰§è¡Œé¡ºåºï¼š

1. `Instantiate` åˆ›å»ºç®±å­å®ä¾‹
2. ç«‹å³è°ƒç”¨ `Load(data)` æ¢å¤æ•°æ® â†’ æ­¤æ—¶ `_inventory` å’Œ `_inventoryV2` è¢«åˆå§‹åŒ–å¹¶å¡«å……æ•°æ®
3. `SetActive(true)` æ¿€æ´»å¯¹è±¡
4. **é—®é¢˜**ï¼šä¹‹å `Start()` æ‰§è¡Œæ—¶ï¼Œ`Initialize()` ä¼šé‡æ–°åˆ›å»º `_inventory` å’Œ `_inventoryV2`ï¼Œ**è¦†ç›–æ‰ `Load()` ä¸­æ¢å¤çš„æ•°æ®**ï¼

ç¬¬äºŒæ¬¡åŠ è½½æ—¶ï¼Œç®±å­å·²å­˜åœ¨äºåœºæ™¯ä¸­ï¼Œä¸éœ€è¦é‡å»ºï¼Œç›´æ¥è°ƒç”¨ `Load()`ï¼Œæ­¤æ—¶ `Initialize()` å·²ç»æ‰§è¡Œè¿‡äº†ï¼Œæ‰€ä»¥æ•°æ®ä¸ä¼šè¢«è¦†ç›–ã€‚

**ä¿®å¤æ–¹æ¡ˆ**:

ä¿®æ”¹ `ChestController.Initialize()` æ–¹æ³•ï¼Œæ·»åŠ æ£€æŸ¥ï¼šå¦‚æœ `_inventory` å’Œ `_inventoryV2` å·²ç»è¢« `Load()` åˆå§‹åŒ–å¹¶å¡«å……æ•°æ®ï¼Œåˆ™ä¸é‡æ–°åˆ›å»ºã€‚

**ä»£ç å˜æ›´**:

```csharp
// ä¿®æ”¹å‰ï¼š
_inventory = new ChestInventory(storageData.storageCapacity);
_inventoryV2 = new ChestInventoryV2(storageData.storageCapacity);
_inventory.OnInventoryChanged += OnInventoryChangedHandler;

// ä¿®æ”¹åï¼š
if (_inventory == null)
{
    _inventory = new ChestInventory(storageData.storageCapacity);
    _inventory.OnInventoryChanged += OnInventoryChangedHandler;
}
else
{
    // ç¡®ä¿äº‹ä»¶è®¢é˜…ï¼ˆLoad() ä¸­åˆ›å»ºçš„ _inventory å¯èƒ½æ²¡æœ‰è®¢é˜…äº‹ä»¶ï¼‰
    _inventory.OnInventoryChanged -= OnInventoryChangedHandler;
    _inventory.OnInventoryChanged += OnInventoryChangedHandler;
}

if (_inventoryV2 == null)
{
    _inventoryV2 = new ChestInventoryV2(storageData.storageCapacity);
}
```

**ä¿®å¤åŸç†**:
- `Load()` å…ˆäº `Start()` æ‰§è¡Œæ—¶ï¼Œ`_inventory` å’Œ `_inventoryV2` å·²è¢«åˆå§‹åŒ–å¹¶å¡«å……æ•°æ®
- `Initialize()` æ£€æŸ¥åˆ°å®ƒä»¬ä¸ä¸º nullï¼Œè·³è¿‡é‡å»ºï¼Œä¿ç•™ `Load()` ä¸­æ¢å¤çš„æ•°æ®
- åŒæ—¶ç¡®ä¿äº‹ä»¶è®¢é˜…æ­£ç¡®ï¼ˆå…ˆç§»é™¤å†æ·»åŠ ï¼Œé¿å…é‡å¤è®¢é˜…ï¼‰

**ä¿®æ”¹æ–‡ä»¶**:
- `ChestController.cs` - Initialize() æ–¹æ³•æ·»åŠ  null æ£€æŸ¥ï¼Œé¿å…è¦†ç›– Load() æ¢å¤çš„æ•°æ®

**é—ç•™é—®é¢˜**:
- æ— 

---

## ç›¸å…³ä»£ç æ–‡ä»¶ï¼ˆæ›´æ–°ï¼‰

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `Assets/YYY_Scripts/Controller/TreeController.cs` | æ ‘æœ¨æ§åˆ¶å™¨ï¼ˆå·²ä¿®å¤æ¸å˜ç§å­ï¼‰ |
| `Assets/YYY_Scripts/Service/SeasonManager.cs` | æ¸å˜è¿›åº¦è®¡ç®—ï¼ˆå·²ä¿®å¤ SetSeasonï¼‰ |
| `Assets/YYY_Scripts/Service/TimeManager.cs` | æ—¶é—´ç®¡ç†ï¼ˆå·²ä¿®å¤ SetTimeï¼‰ |
| `Assets/YYY_Scripts/World/Placeable/ChestController.cs` | ç®±å­æ§åˆ¶å™¨ï¼ˆå·²ä¿®å¤ Initialize è¦†ç›–é—®é¢˜ï¼‰ |

