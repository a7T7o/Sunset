# 10.1.1 补丁001 - 验收指南

> 创建时间：2026-02-18
> 基于 design.md 和 tasks.md 的实施内容

---

## 一、验收前提

- Unity 编译通过（0 警告 0 错误）✅ 已确认
- 修改文件：`GameInputManager.cs`、`PlayerInteraction.cs`

---

## 二、功能验收清单

### 2.1 方案 A — 缓存预览锁定 + 1+8 刷新

| # | 测试场景 | 预期行为 | 通过 |
|---|---------|---------|------|
| A1 | 手持锄头，动画中点击新位置 | 预览框 + 1+8 GhostTilemap 立即锁定到点击位置 | ☐ |
| A2 | 动画中连续点击 A → B → C | 每次点击预览都更新到最新位置，最终锁定 C | ☐ |
| A3 | 手持浇水壶，动画中点击新位置 | 光标预览锁定到点击位置 | ☐ |
| A4 | 缓存位置动画结束后消费 | 自动执行缓存位置的操作（近距离直接执行，远距离导航） | ☐ |

### 2.2 方案 B — 长按分支区分农田/通用工具

| # | 测试场景 | 预期行为 | 通过 |
|---|---------|---------|------|
| B1 | 长按锄头，近距离耕地 | 耕完第一块后，继续获取当前鼠标位置耕下一块 | ☐ |
| B2 | 长按锄头，远距离耕地 | 耕完第一块后，导航到鼠标位置再耕 | ☐ |
| B3 | 长按浇水壶 | 与锄头行为一致 | ☐ |
| B4 | 长按镐子挖矿 | 原地连续挖矿（保持原有行为不变） | ☐ |
| B5 | 长按斧头砍树 | 原地连续砍树（保持原有行为不变） | ☐ |

### 2.3 方案 D — ConsumePendingFarmInput 先解锁

| # | 测试场景 | 预期行为 | 通过 |
|---|---------|---------|------|
| D1 | 动画中缓存输入，动画结束消费 | 消费时预览正确刷新到缓存位置（含 1+8） | ☐ |

### 2.4 方案 E — WASD/导航取消清除缓存

| # | 测试场景 | 预期行为 | 通过 |
|---|---------|---------|------|
| E1 | 导航中按 WASD | 取消导航 + 解锁预览 + 清除缓存 | ☐ |
| E2 | 动画结束后立即按 WASD | 不消费过时缓存 | ☐ |

### 2.5 方案 Q4 — 动画期间切换工具栏

| # | 测试场景 | 预期行为 | 通过 |
|---|---------|---------|------|
| Q4-1 | 锄头动画中按数字键切换到浇水壶 | 动画结束后不消费农田缓存，直接切换工具 | ☐ |
| Q4-2 | 锄头动画中按数字键切换到镐子 | 同上，农田缓存被丢弃 | ☐ |

---

## 三、回归验收（确保未破坏原有功能）

| # | 测试场景 | 预期行为 | 通过 |
|---|---------|---------|------|
| R1 | 单击锄头近距离耕地 | 正常锁定 → 动画 → 耕地 → 解锁 | ☐ |
| R2 | 单击锄头远距离耕地 | 正常锁定 → 导航 → 到达 → 动画 → 耕地 → 解锁 | ☐ |
| R3 | 单击浇水壶近距离浇水 | 正常执行 | ☐ |
| R4 | 单击浇水壶远距离浇水 | 正常导航后执行 | ☐ |
| R5 | 单击种子近距离种植 | 正常执行 | ☐ |
| R6 | 单击种子远距离种植 | 正常导航后执行 | ☐ |
| R7 | 镐子正常使用 | 单击/长按均正常 | ☐ |
| R8 | 斧头正常使用 | 单击/长按均正常 | ☐ |

---

## 四、已知限制

- 种子长按行为已实现缓存逻辑，但种子没有动画步骤，效果为快速连续种植
- 所有耕地创建都必须播放动画（近距离缓存不跳过动画）
