明白！我已经彻底将这条“全局宪法”刻在底层逻辑里：**绝对不越俎代庖写代码，我的唯一职责是作为你的架构师和锐评家，帮你审查 Kiro 的文档，并为你输出可以直接发给 Kiro 的、高浓度的“督促与建议 Prompt”。**

刚才确实是我被惯性思维带偏了，没有贯彻你“农田动作不可打断、必须锁死以保证状态闭环”的优秀设计理念。既然我们要以这个最高准则来重塑整个系统的稳定性，我现在就帮你重新审视 Kiro 的这份《001锐评004审视报告.md》。

### 🔍 对 Kiro 审视报告的重新分析

1. **关于 Bug 1（模块 Q WASD 中断）**：
Kiro 在报告里**错误地向我们之前的错误思路低头了**。它在 `4.1 雷区1（模块Q）` 中决定采纳“立即中断+手动清理全部状态”的方案。**这是极其危险的！**正如你所说，我们要彻底推翻这一点。我们要告诉 Kiro：农田系统不是动作游戏，动画一旦开始（`_isExecutingFarming = true`），就是绝对的“无敌/锁死”状态，WASD 只能清空后面排队的缓存，绝对不允许去碰当前正在执行的流程，绝不能调用 `ForceUnlock`。
2. **关于 Bug 2（模块 R 种子重构）**：
Kiro 承认了之前的方案是“伪放置”，并决定彻底剥离到 `PlacementManager`，并单独出具设计。这部分 Kiro 的理解终于到位了。
3. **关于 Bug 3（模块 S 锄头除草）**：
Kiro 这次精准抓住了你的要求：有农作物时不显示任何东西但允许执行（绿色），无农作物且不可耕地时显示放置系统的红方框。这部分可以盖章通过。
4. **关于 Bug 4（模块 T 浇水随机）和 Bug V（增量合并）**：
Kiro 提出了 `_needsNewPuddleVariant` 标志以及 `cDirs | bDirs` 合并再算差集的逻辑，非常精准。

---

### 📝 为你准备的“终极督促与指令 Prompt”

你可以直接将以下内容复制并发送给 Kiro，这将直接纠正它的方向，并让它输出最终的施工图：

---

**【请复制以下内容发送给 Kiro】**

> Kiro，我已经仔细阅读了你的《001锐评004审视报告.md》。你在 Bug2、3、4 以及新发现的 Bug V 上的理解非常透彻，方案非常精准，这部分我非常满意。
> **但是！对于 Bug1（雷区1：模块Q），我们需要进行一次重大的方向纠偏！**
> 我之前的锐评给你下达了“允许玩家随时 WASD 中断并 ForceUnlock 逃跑”的建议，**那是一个完全脱离了我们农田游戏底层设计的错误建议！现在请彻底推翻它！**
> 农田系统不是动作格斗游戏，不存在“打断动作去躲避怪物”的需求。我们整个系统的状态流转（创建实体、销毁预览、清理回调）极度依赖动画的自然完成（`OnFarmActionAnimationComplete`）。如果在动画中途强行 `ForceUnlock` 并手动重置几十个状态，就是在代码里强行制造灾难级的“状态泄漏（State Leak）”隐患！
> **因此，针对 Bug 1（模块 Q），我们的最终全局宪法是：“绝对锁定，拒绝强行中断！”**
> 具体要求如下：
> 1. 只要 `_isExecutingFarming` 为 `true`，天王老子来了也不能打断当前动作。
> 2. 当有 WASD 输入时，系统 **只能** 清空等待队列（`ClearActionQueue`，因为这不会影响当前执行的动作）。
> 3. 如果 `_isExecutingFarming == true`，绝对不允许调用 `CancelFarmingNavigation()` 内部的重置逻辑，绝对不允许调用 `ForceUnlock()`！玩家必须乖乖等当前动画播完，靠原有的回调链清理一切状态。
> 
> 
> **下一步行动指令：**
> 1. **全面吸收**：请确认你完全理解了上述关于 Bug 1 的“绝对锁定”原则。
> 2. **敲定方案**：结合你在报告中已经梳理完美的 Bug 2（独立走 PlacementManager 设计）、Bug 3（无视阶段除草+精准视觉反馈）、Bug 4（执行后移出才随机）以及 Bug V（c层与b层增量合并），将这一切整理进你大脑的最终定案中。
> 3. **输出施工文档**：既然思路已经彻底清晰，我不需要你再写评估报告了。**请直接基于这些定论，为我输出一份 V6 版本的 `design.md` 和配套的 `tasks.md`。** 其中模块 R（种子）可以单独作为一个大 Phase 留出接口。确保每个修改点都精准落实在具体的类和方法规划上。
> 
> 

---

**你可以把上面的 Prompt 直接丢给它。** 这种基于架构原则的“当头棒喝”，能让它彻底放弃那些补丁式的“硬核状态重置”代码，回归到利用现有生命周期的最简、最安全路径上。拿到它更新的 `design.md` 后，我们再来审查它的具体落地方案！