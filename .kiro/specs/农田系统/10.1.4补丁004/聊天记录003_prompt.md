请你来到.kiro\specs\农田系统\10.1.4补丁004\聊天记录001.md，和相关memory，进行全面的回顾并理解你所完成的内容的情况，刚刚对话中断了，你在聊天记录001内进行了分析但是我认为还是不够准确，于是进行了补充，请你认真阅读并进行全面的理解和深入思考：

”我认为还是需要强调，你的描述有误：

1、你的第一点提到：“正确做法是：WASD 中断时只清空队列，不中断当前正在执行的动画。当前正在执行的操作应该完整走完（动画 → tile 创建 → 清除执行预览）。”，但是其实wasd本就不会中断动画，现在的情况是你动画播放中输入移动当前执行预览不会清空，但是等到动画播放完毕后耕地不会被创建，然后预览又留下来了，这里涉及到众多问题

2、第二点我认为你应该也能够结合我对第一点的纠正和上一个全面描述来进行重新全面分析准确

3、第三点确实是需要修复，但是更核心的是和第五点进行结合，进行全面的逻辑链完善，比如隔了一个单位距离的两个位置，a已经有了耕地，b是预览位置，那么其实a和b中间的那个单位区域的显示预览层就应该显示的是R，但是实际创建在耕地层的又应该是LR，也就是说我们本就是三层结构，所以对于这些情况就应该是进行独立处理，但是需要确保保有一定的联系和限制，对于预览ghost是所有情况都会显示的，因为需要显示是否可以进行耕地，在已经存在队列的预览处和其他不可耕种区域肯定需要显示红色的ghost，但是对于队列预览和实际耕地层是不可能同时存在内容的，有一个存在那么另一个就要消失，而且还是不可逆的关系，也就是只能从队列预览变为实际耕地而不能实际耕地变为队列预览层，这就很复杂，需要创建全面的情况矩阵进行彻底分析和解决，对于斜角也是，这很重要，并且需要和是否能够交互进行逻辑隔离和厘清，确保分支明确，不要走错分支导致场景错乱bug纵横，然后对于上面描述的ghost显示与实际逻辑隔离开来需要彻底理解分层情况，ghost预览和队列预览应该是一个显示逻辑，然后实际落地的时候就是需要1+8进行全面的覆盖，因为预览的存在就是以不影响实际耕地的前提所存在的，这很重要，我们不要本末倒置了，预览本就不应该与实际内容有重叠

4、执行只有动画开始的时候才叫做执行，过去的导航途中只能叫做前置行为，这个前置行为被打断了这个目的元素就不应该出队，而是随着队列一起被清空，这是很正常的逻辑，你还是没有完全理解我的业务逻辑和要求



对于以上内容我需要你严格结合本对话刚刚上一个轮次，也就是开头提出的prompt进行全面理解，然后给出预览的详细矩阵分析文档，再完成补丁004V2版本，我需要你彻底完善农田交互“



然后下面是上面提到的上一个轮次，开头提出的prompt，请你结合进行分析：“

下图两个情况代表了所有相隔一个单位以及斜角的情况，你还是没有办法做到预览处理后与原来的内容不重复，你应该进行进一步的分析去做到完全的屏蔽，请你自主思考完成反省





然后你还是没有清理干净，我这个是在远处点击后再摁下a键往左走取消了，你没有清理掉这个预览，但是我如果走过去在耕地动画进行中但是没有达到触发创建实际落地的时候你也会留一个预览在这里，然后也不创建土地，这说明什么，你并没有做对这个数据提取时机 ，我需要你把当前执行的土地提取出来，其他的保留在队列的情况，是你当前已经走到位置并且动画开始的那一瞬间进行提取处理，并且确保提取出来的这个内容进行完整的流程，加上之前已经进入了预览队列并显示的前提，现在动画开始的瞬间的流程就是当前土地内容出队并保证能独立显示不受任何影响，然后等动画达到触发条件，然后开始完成内容落地并且清理完毕当前出队的所有预览内容，这才是正规的流程，你现在做不到这一点，甚至bug很重，请你剖析代码进行彻查





对于浇水目前没有任何问题了，因为浇水比较简单，但是你上面我提到的1+8预览处理优化必须做到，因为如下图批量进行的时候你的预览会打架，彻底的打架，我要你进行实际情况的1+8计算但是也不是这样的进行，你肯定至少要确保所有情况的逻辑正常，你现在完全可以重复左键进行处理，只有不可种植区域才会显示红色，你现在鼠标放在耕地上面不会显示任何内容也没有红色，这就是你现在的毛病，非常严重，做对了一部分，但是只做对了这一部分就会产生极大的bug，对于这个对话所提出的所有bug你都要进行深度的思考和反省去理解和消化，仔细回顾我的所有prompt和需求，回顾历史对话进行深思，你现在太不像话了，我需要收回对你的赞许！



”



然后对于交互矩阵我还有内容需要重新强调，请你引起最高优先级注意：我就这样说，水平相邻（A 已有耕地在左，P 预览在右，间距1格）这个情况，当前实际耕地这个M处是显示的L，但是你现在的代码预览的内容是LR，这样就会重叠，我要的是预览只有R，预览加实际等于最终的内容LR，这样的逻辑你应该能懂了？但是实际实现肯定需要结合实际方案进行处理，我之所以描述故事和思路是想让你理解问题是如何出现的他为什么不对应该是怎样的，上面的简述是直接告诉你我要的这个场景2是如何处理，就像你的场景3斜角相邻（A 已有耕地在左下，P 预览在右上），你现在代码实现的预览显示是（0,-1）是DR，（-1,0）是UL，但是其实（0,-1）实际耕地已经有一个D了，你就不要再多余了，（-1,0）也是同理，所以请你彻底厘清这一点并完成你的交互矩阵



对于以上所有内容我再督促一下，你要交付的是交互矩阵文档，结合我上述所有内容思考后得出的补丁004V2版本，以及其他你认为可以创建来进行补充和更近一步完成我的需求与锐评的文档