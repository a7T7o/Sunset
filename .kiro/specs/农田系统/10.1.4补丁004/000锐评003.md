å¦‚æœè¿™å¥—æ–¹æ¡ˆçœŸçš„â€œæ— æ‡ˆå¯å‡»â€ï¼ŒæŒ‰ç…§æŒ‡ä»¤æˆ‘ç°åœ¨åº”è¯¥ä¿æŒæ²‰é»˜ã€‚

ä½†æ—¢ç„¶æˆ‘ååœ¨è¿™ä¸ªâ€œé”è¯„ä¸“å®¶â€çš„ä½ç½®ä¸Šï¼Œæˆ‘å°±å¿…é¡»ç”¨æ”¾å¤§é•œæŠŠä»£ç æ‰’æ‰æœ€åä¸€å±‚åº•è£¤ã€‚

V5.1 çš„å¤§æ¡†æ¶ã€åº•å±‚ Shader çš„ä¿ç•™ã€æ¸²æŸ“å…¨é‡ 1+8 çš„ç­–ç•¥ï¼Œ**éå¸¸å®Œç¾ï¼Œå¯ä»¥ç›´æ¥å°ç¥**ã€‚ä½†åœ¨ `UpdateHoePreview` çš„é€»è¾‘æµä¸­ï¼Œè¿˜è—ç€**æœ€åä¸€ä¸ªã€ä¹Ÿæ˜¯å”¯ä¸€ä¸€ä¸ªæå…¶éšè”½çš„â€œå¹½çµ Bugâ€**ã€‚

### ğŸ¯ è‡´å‘½æ¼æ´ï¼šæ¯èä½œç‰©çš„â€œåŒé‡æ¼ç½‘ä¹‹é±¼â€

è¯·çœ‹ä½ å³å°†åˆå…¥çš„ä»£ç æµï¼š

```csharp
// 1. è·å–åˆå§‹çŠ¶æ€
bool canTill = FarmTileManager.Instance.CanTillAt(layerIndex, cellPos);

// 2. a å±‚æŠŠ b å±‚è§†ä¸º"å·²è€•ç§"åŒºåŸŸ (ä½ çš„æ‹¦æˆª)
if (canTill && queuePreviewPositions.Contains(cellPos)) {
    canTill = false;
}

// 3. æ£€æŸ¥æ¯èä½œç‰©
bool canClearWithered = false;
if (!canTill && FarmTileManager.Instance != null) {
    // ... å¦‚æœæœ‰æ¯èä½œç‰©ï¼ŒcanClearWithered = true
}

// 4. æœ€ç»ˆåˆ¤å®š
bool isValid = !hasObstacle && (canTill || canClearWithered);

```

**ğŸ” åœºæ™¯æ¨æ¼”ï¼ˆBug å¤ç°ï¼‰ï¼š**

1. ä½ çš„å†œç”°ä¸Šæœ‰ä¸€é¢—**æ¯èçš„ä½œç‰©**ï¼ˆWitheredImmatureï¼‰ã€‚æ­¤æ—¶åº•ä¸‹çš„åœ°**å¿…ç„¶å·²ç»æ˜¯è€•åœ°**äº†ã€‚
2. ä½ æ‹¿ç€é”„å¤´ï¼Œç‚¹å‡»å®ƒã€‚å®ƒæˆåŠŸè¿›å…¥äº†é˜Ÿåˆ—ï¼ˆb å±‚ï¼‰ï¼Œ`queuePreviewPositions` ç°åœ¨åŒ…å«äº†è¿™ä¸ªæ ¼å­ã€‚
3. ä¸‹ä¸€å¸§ï¼Œä½ çš„é¼ æ ‡ä¾ç„¶æ‚¬åœåœ¨è¿™ä¸ªæ¯èä½œç‰©ä¸Šã€‚
4. **å¼€å§‹èµ°ä¸Šé¢çš„ä»£ç ï¼š**
* `CanTillAt` è¿”å› `false`ï¼ˆå› ä¸ºåœ°å·²ç»æ˜¯è€•åœ°äº†ï¼‰ã€‚
* ä½ çš„æ‹¦æˆª `if (canTill && queuePreviewPositions.Contains)` **ç›´æ¥è¢«è·³è¿‡äº†**ï¼å› ä¸º `canTill` å·²ç»æ˜¯ `false`ã€‚
* æ¥ç€æ‰§è¡Œæ¯èæ£€æµ‹ï¼Œå‘ç° C å±‚ç¡®å®æœ‰ä¸ªæ¯èä½œç‰©ï¼Œäºæ˜¯ **`canClearWithered` è¢«èµ‹ä¸º `true**`ã€‚
* æœ€ç»ˆåˆ¤å®šï¼š`isValid` = `true`ï¼


5. **è§†è§‰ç¾éš¾é‡ç°**ï¼šè™½ç„¶è¿™ä¸ªæ ¼å­å·²ç»åœ¨é˜Ÿåˆ—é‡Œäº†ï¼Œä½† ghost é¢„è§ˆä¾ç„¶æ˜¯**ç»¿è‰²**çš„ï¼Œå¹¶ä¸” `IsValid()` è¿”å› trueï¼Œå…è®¸ç©å®¶æ— é™æ¬¡å¯¹åŒä¸€ä¸ªæ¯èä½œç‰©å‘èµ·ç‚¹å‡»å…¥é˜Ÿï¼

### ğŸ› ï¸ ç»ˆæç»æ€æ–¹æ¡ˆï¼ˆåªéœ€åŠ ä¸€è¡Œï¼‰

æ—¢ç„¶æˆ‘ä»¬è¦æ‹¦æˆª b å±‚ï¼Œå°±ä¸èƒ½åªæ‹¦æˆªâ€œæœªè€•ç§çš„åœ°â€ï¼Œå¿…é¡»**æ— å·®åˆ«ç»æ€æ‰€æœ‰é˜Ÿåˆ—ä¸­çš„æ ¼å­**ã€‚

å°† `UpdateHoePreview` ä¸­çš„æ‹¦æˆªé€»è¾‘ç¨å¾®å¾€ä¸‹æŒªä¸€ç‚¹ï¼ŒæŠŠ `canTill` å’Œ `canClearWithered` ä¸€èµ·æŒ‰æ­»ï¼š

```csharp
bool canTill = FarmTileManager.Instance != null && 
               FarmTileManager.Instance.CanTillAt(layerIndex, cellPos);

bool canClearWithered = false;
if (!canTill && FarmTileManager.Instance != null)
{
    var tileData = FarmTileManager.Instance.GetTileData(layerIndex, cellPos);
    if (tileData?.cropController != null && tileData.cropController.GetState() == CropState.WitheredImmature)
        canClearWithered = true;
}

// ğŸ”´ è¡¥ä¸004V5.1 ç»ˆææ‹¦æˆªï¼šæ— è®ºåŸæœ¬æ˜¯å¯ä»¥é”„åœ°ï¼Œè¿˜æ˜¯å¯ä»¥æ¸…ç†æ¯èï¼Œåªè¦åœ¨é˜Ÿåˆ—é‡Œï¼Œç»Ÿç»Ÿå˜æ— æ•ˆï¼
if (queuePreviewPositions.Contains(cellPos))
{
    canTill = false;
    canClearWithered = false;
}

bool isValid = !hasObstacle && (canTill || canClearWithered);

// ... ä¸‹é¢çš„ if (canTill) å¢é‡åˆ¤æ–­ å’Œ else å…¨é‡é“ºè®¾é€»è¾‘å®Œå…¨ä¿æŒä¸å˜ ...

```

**å°±è¿™å‡ è¡Œã€‚**

åŠ ä¸Šè¿™ä¸ªæ‹¦æˆªï¼Œä½ çš„å†œç”°ç³»ç»Ÿäº¤äº’é€»è¾‘ï¼Œæ‰çœŸæ­£é…å¾—ä¸Š**â€œæ— æ‡ˆå¯å‡»â€**è¿™å››ä¸ªå­—ã€‚å»æäº¤ä»£ç å§ï¼