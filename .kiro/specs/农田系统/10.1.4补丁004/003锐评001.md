完全理解你现在的处境！看着原本以为完美闭环的代码在实际运行和极限操作下依然爆出视觉 Bug，确实非常让人抓狂。

你总结的这三个点非常精准，特别是对于“浇水随机时机”的重新推敲，这绝对是只有在真实游玩测试时才能察觉到的手感悖论（排队执行时鼠标依然在乱闪，这确实非常不符合逻辑）。同时，种子系统（模块 R）的回归也是时候了，不能再留着这个技术债。

我已经结合我们之前的漫长迭代历史（特别是关于 Bug V 增量差集、Bug Q 极限打断、以及最初你对种子放置化的设计构想），为你把这些口语化的痛点，转化为了一份**极具杀伤力和精确制导**的 Prompt。

你可以直接把下面框里的内容复制并发送给 Kiro：

---

**【请复制以下内容发送给 Kiro】**

> Kiro，我们的 004 补丁在实际的深度测试中，依然暴露出了一些底层的顽疾，并且我需要对部分需求进行修正和架构级的推进。请你立刻调动所有的历史上下文（特别是关于 Bug V、Bug Q 和模块 R 的记忆），仔细分析我下面的三个核心诉求，并给出彻底的重构与修复方案！
> ### 1. 耕地 1+8 增量预览（b层+c层）与极限清理的综合 Bug
> 
> 
> 目前在游戏中，耕地的预览依然会出现严重的视觉重叠和残留，这主要由以下几个深层原因交织而成：
> * **增量处理依然不到位（Bug V 的遗留问题）**：当 ghost 预览（a层）位于已有的耕地（c层）和等待队列（b层）的交界处时，边角的计算依然会出错。比如右边已经满了，其实只需要显示左边的 1+5，但它依然会错误地更新已有边界。这说明你在 `UpdateHoePreview` 中的 `cDirs | bDirs` 的合并以及随后的差集计算（`previewDirs & ~existingDirs`），在某些特定排列或阴影 Tile 的干扰下，依然存在漏判！
> * **极限操作残留（Bug Q 的遗留问题）**：当玩家在极其极限的情况下（比如刚入队或动画刚起手的瞬间）输入 WASD 打断，虽然我们做了锁定和保护，但依然会出现红绿方框或残留的 1+8 预览留在地上永远不消失的异常。
> * **综合爆发**：这两者结合，导致连续快速点击+移动时，农田的视觉反馈彻底崩溃。
> **要求**：请你重新彻底审视 `UpdateHoePreview` 的增量合并逻辑，找出差集计算的盲区；并复查 `ClearActionQueue`、`CancelFarmingNavigation` 与执行预览清理（`RemoveExecutingPreview`）之间的闭环，找出那个让预览变成“孤儿”留在地上的漏洞！
> 
> 
> ### 2. 浇水随机样式的时机错误（手感修正）
> 
> 
> 之前我们在模块 T 中设定的规则是“浇水执行后（`OnWaterExecuted`）且移出格子才随机更新样式”。这是一个**错误的逻辑悖论**！
> * **问题表现**：因为我们现在是队列执行。如果我长按或连续点击排队了 5 个浇水任务，然后我停下鼠标，角色自己走过去一个个执行。此时随着角色执行完成，底层的 `OnWaterExecuted` 被不断触发，导致我停在原地的鼠标 ghost 预览开始疯狂地自己随机变幻！这极其怪异！
> * **正确需求**：随机的时机**不应该**与“角色执行完成”绑定，而**应该**与“玩家操作入队（b层的创建）”绑定！只要玩家成功点击左键，把一个浇水指令送入了队列（创建了 b 层的水渍），此刻就应该立刻为鼠标上的 ghost 刷新下一个随机样式，以便玩家进行下一次点击规划。
> **要求**：请废弃现有的 `OnWaterExecuted` 触发逻辑，将随机判定移到 `TryEnqueueFarmTool` 成功入队浇水任务的瞬间。
> 
> 
> ### 3. 种子系统彻底剥离（模块 R 重新启动）
> 
> 
> 前面由于补丁 004 的复杂性，我们将“种子从农田系统改为放置系统”的需求（模块 R）列入了待办。现在，是时候终结它了。
> * **问题表现**：现在的种子依然纠缠在农田交互的队列和预览系统里，导致逻辑臃肿且依然存在各种不可预知的队列问题。
> * **正确需求**：彻底删除所有关于农作物种植的队列预览和农田交互处理！种子的播种不需要作为农田交互，它完全就是一种**放置物品（Placeable Item）**，必须和树苗的放置逻辑与交互保持 100% 一致。
> **要求**：请把 `GameInputManager` 和 `FarmToolPreview` 中关于 Seed 的所有特判（`TryEnqueueSeed`、`UpdateSeedPreview` 等）全部连根拔起。将 `SeedData` 完全接入你的 `PlacementManager` 或相关放置系统中，复刻树苗的判定与放置表现。
> 
> 
> **请你先对这三个问题进行彻底的代码推演和分析，不要急于写代码，先给我一份针对这三点的《005深度重构与修复分析报告》，我要看你是否真的理解了这些系统级漏洞的根源！**

*** 把这个发给 Kiro，它的逻辑链会被强制拉回到这三个核心痛点上。等它输出分析报告后，我们再来给它把把关，看看它这次找 Bug 找得准不准！