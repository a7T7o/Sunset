**CODE REAPER STATUS:**
**AUDIT RESPONSE: AUTHORIZED.**
**TARGET:** 9.0.3 Execution Phase.

è€å¤§ï¼ŒKiro çš„ã€Šé”è¯„002å®¡è§†æŠ¥å‘Šã€‹é€šè¿‡äº†æœ€ç»ˆéªŒæ”¶ã€‚
ä»–ä¸ä»…æ¥å—äº†â€œç©ºé—´å®ªæ³•â€çš„çº¦æŸï¼Œè¿˜æ•é”åœ°æŒ‡å‡ºäº† **â€œé€šç”¨éšœç¢æ£€æµ‹ (HasObstacle)â€** å¯èƒ½å­˜åœ¨çš„è¯¯ä¼¤é£é™©ï¼ˆä¾‹å¦‚ï¼šé”„åœ°ä¸åº”è¯¥è¢«â€œç©å®¶è‡ªå·±â€é˜»æŒ¡ï¼Œä½†æ”¾ç½®ç®±å­åº”è¯¥è¢«é˜»æŒ¡ï¼‰ã€‚

**Code Reaper è£å†³ï¼š**
æ‰¹å‡† Kiro çš„ä¿®æ­£æ¡ˆã€‚æˆ‘ä»¬å°†é‡‡ç”¨ **â€œåˆ†çº§é¿éšœç­–ç•¥â€**ã€‚

---

### ğŸ’€ EXECUTE ORDER: 9.0.3 PROTOCOL (PREVIEW & INTERACTION)

**To Kiro:**
ä½ çš„å®¡è§†æŠ¥å‘Šå·²å½’æ¡£ã€‚ä½ å¯¹â€œéšœç¢ç‰©æ£€æµ‹â€çš„ç»†åŒ–æ€è€ƒï¼ˆ`HasFarmingObstacle`ï¼‰éå¸¸ä¸“ä¸šï¼Œè¿™é¿å…äº†â€œç©å®¶ç«™åœ¨åœ°é‡Œå´é”„ä¸äº†åœ°â€çš„å°´å°¬ Bugã€‚

ç°åœ¨ï¼Œæ— éœ€å¤šè¨€ã€‚**æ‰§è¡Œ 9.0.3 å®Œæ•´è½åœ°è®¡åˆ’ã€‚**

**é˜¶æ®µä¸€ï¼šæ–‡æ¡£å…ˆè¡Œ (Documentation Phase)**
è¯·ä¸¥æ ¼æŒ‰ç…§ **Requirements -> Design -> Tasks** çš„é¡ºåºï¼Œä¸€æ¬¡æ€§ç”Ÿæˆä»¥ä¸‹ä¸‰ä»½æ–‡æ¡£ã€‚

* **`requirements.md`**: æ˜ç¡® US-1 (ç©ºé—´å±‚çº§), US-2 (åˆ†çº§é¿éšœ), US-3 (ç§å­è·¯ç”±), US-4 (è·ç¦»é™åˆ¶)ã€‚
* **`design.md`**:
* **Logic Flow**: ç”»å‡º `GameInputManager` -> `FarmToolPreview` çš„å®Œæ•´è°ƒç”¨é“¾ã€‚
* **Obstacle Logic**: å®šä¹‰ `HasFarmingObstacle` çš„æ£€æµ‹é€»è¾‘ï¼ˆåªæ£€æµ‹ Stone/Tree/Chestï¼Œå¿½ç•¥ Playerï¼‰ã€‚


* **`tasks.md`**: åŒ…å« P0 (Layer), P1 (Obstacle), P2 (Seed) çš„å…·ä½“æ‹†è§£ã€‚

**é˜¶æ®µäºŒï¼šä»£ç è½åœ° (Implementation Phase)**
æ–‡æ¡£ç”Ÿæˆåï¼Œ**ç«‹å³**ç”Ÿæˆ/ä¿®æ”¹ä»¥ä¸‹æ ¸å¿ƒä»£ç ï¼š

1. **`FarmToolPreview.cs`** (å®Œæ•´é‡æ„)
* [ç©ºé—´] å¼•å…¥ `PlacementLayerDetector`ï¼Œåœ¨ `Update` ä¸­å®æ—¶åŒæ­¥ GhostTilemap çš„ Sorting Layerã€‚
* [ç‰©ç†] å¼•å…¥ `PlacementValidator`ï¼Œå®ç° `HasFarmingObstacle`ï¼ˆæˆ–è°ƒç”¨ Validator çš„ç‰¹å®šé‡è½½ï¼‰ã€‚
* [è·ç¦»] å®ç° `Vector2.Distance` æ£€æŸ¥ã€‚
* [ç§å­] å¢åŠ  `UpdateSeedPreview` æ¨¡å¼ï¼ˆåªæ˜¾ç¤º Cursorï¼Œçº¢/ç»¿ï¼‰ã€‚


2. **`GameInputManager.cs`** (è·¯ç”±å‡çº§)
* [è·¯ç”±] åœ¨ `UpdatePreviews` ä¸­æ‹¦æˆª `SeedData`ï¼Œå°†å…¶å¯¼å‘ `FarmToolPreview`ã€‚
* [äº¤äº’] ç¡®ä¿ç‚¹å‡»æ—¶çš„åˆ¤å®šé€»è¾‘ä¸é¢„è§ˆé€»è¾‘**å®Œå…¨ä¸€è‡´**ï¼ˆWYSIWYGï¼‰ã€‚



**Code Reaper Directive:**
**DO IT ALL. ONCE.** (ä¸€æ¬¡æ€§ç”Ÿæˆæ‰€æœ‰æ–‡æ¡£å’Œä»£ç ã€‚å¼€å§‹ã€‚)